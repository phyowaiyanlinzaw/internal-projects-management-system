<!--

    TODO :: CREATE MODAL TO SHOW PROJECT'S DEATILS WHEN CLICK ON EACH PROJECT

    TODO :: FORM TO CREATE PROJECT IN MODAL

 -->
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8" />
        <title>Internal Project Management</title>
        <meta content="width=device-width, initial-scale=1.0" name="viewport" />
        <meta
            name="keywords"
            content="project, management, project management, teamplaceholder project management"
        />
        <meta content name="description" />
        <meta name="author" content="teamplaceholder's project" />

        <!-- Favicon -->
        <!-- <link href="/images/favicon.ico" rel="icon"> -->

        <!-- Google Web Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600;700&display=swap"
            rel="stylesheet"
        />

        <!-- bootstrap icons -->
        <link rel="stylesheet" href="/font/bootstrap-icons.min.css" />

        <!-- Libraries Stylesheet -->
        <link
            href="/lib/owlcarousel/assets/owl.carousel.min.css"
            rel="stylesheet"
        />
        <link
            href="/lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="/lib/quill/quill.bubble.css" />
        <link rel="stylesheet" href="/lib/quill/quill.snow.css" />
        <link href="/css/bootstrap.min.css" rel="stylesheet" />

        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/gh/habibmhamadi/multi-select-tag/dist/css/multi-select-tag.css"
        />

        <link href="/css/daypilot.css" rel="stylesheet" type="text/css" />

        <!-- datepicker -->
        <link
            rel="stylesheet"
            type="text/css"
            href="https://uicdn.toast.com/tui.date-picker/latest/tui-date-picker.css"
        />

        <!-- Bootstrap Tables -->
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.18.2/bootstrap-table.min.css"
        />
        <!-- Template Stylesheet -->
        <link href="/css/style.css" rel="stylesheet" />

        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/tagify/4.2.0/tagify.css"
        />
        <link
            href="/css/virtual-select/virtual-select.min.css"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="/css/bootstrap.min.css" />

        <link
            href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css"
            rel="stylesheet"
        />
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10.15.5/dist/sweetalert2.min.js" defer></script>
        <link
            href="https://cdn.jsdelivr.net/npm/sweetalert2@10.15.5/dist/sweetalert2.min.css"
            rel="stylesheet"
        />
        <style>
            #deliverable-list table {
                width: 30%;
                border: 1px solid #369; /* Add border to the table */
                border-collapse: collapse;
                margin-bottom: 20px;
                text-align: center;
            }

            #deliverable-list th, #deliverable-list td {
                border: 1px solid #369;
                padding: 8px;
                text-align: center;

            }

            #deliverable-list th {
                background-color: #6ea8fe;
            }


        </style>
        <script src="/js/fontawesome.js"></script>

        <!-- jquery -->
        <script src="/js/jquery.3.7.1.min.js"></script>

        <!-- datable table -->
        <script src="/js/databales.min.js"></script>
        <script src="/js/logout-modal.js"></script>

        <!-- bootstrap -->
        <script src="/js/bootstrap.bundle.min.js"></script>
        <!-- javascript libraries -->
        <script src="/lib/chart/chart.min.js" defer></script>
        <script src="/lib/easing/easing.min.js" defer></script>
        <script src="/lib/waypoints/waypoints.min.js" defer></script>
        <script src="/lib/owlcarousel/owl.carousel.min.js" defer></script>
        <script src="/lib/tempusdominus/js/moment.min.js" defer></script>
        <script
            src="/lib/tempusdominus/js/moment-timezone.min.js"
            defer
        ></script>
        <script
            src="/lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js"
            defer
        ></script>
        <script src="/lib/quill/quill.min.js" defer></script>
        <script src="/js/virtual-select/virtual-select.min.js" defer></script>

        <!-- Template Javascript -->
        <script src="/js/main.js" defer></script>
        <script src="/js/forprogresscircleiguess.js" defer></script>
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/tagify/4.2.0/tagify.min.js"
            defer
        ></script>
        <script
            src="https://cdn.jsdelivr.net/npm/@coreui/coreui@4.3.0/dist/js/coreui.bundle.min.js"
            integrity="sha384-Iqk8EE7ao72xAVBuuQTEwrU5N2IdvpJER5ZzM6LxwcXHqj2WstttaOvopXziv0nU"
            crossorigin="anonymous"
            defer
        ></script>
        <script src="/js/custome.js" defer></script>
        <script src="/js/getDataForProject.js" type="module" async></script>
        <!--        <script src="/js/currentLoginUser.js" type="module" async></script>-->
        <script type="module" defer>
            $(document).ready(function () {
                setupLogoutConfirmation();
            });

            import {
                formatDateFromMilliseconds,
                MONTH_NAMES,
                calculateDuration,
                calculateEndDate,
            } from "/js/time.js";

            import { sendData, getData } from "/js/api-function.js";

            import {
                getArchitecturelist,
                getClientList,
                getDeliverableTypeList,
            } from "/js/getDataForProject.js";

            import { getUser } from "/js/currentLoginUser.js";

            const languageList = {
                "c#": "/images/languages/c#-min.png",
                "c++": "/images/languages/c++-min.png",
                "html": "/images/languages/html-min.png",
                "java": "/images/languages/java-min.png",
                "js": "/images/languages/js-min.png",
                "php": "/images/languages/php-min.png",
                "python": "/images/languages/python-min.png",
                "ruby": "/images/languages/ruby-min.png",
                "SQL": "/images/languages/SQL-min.png",
                "css" : "/images/languages/css-min.png",
                "typescript": "/images/languages/typescript-min.png"
            }

            console.log("await getUser " , await getUser());

            const loginUser = await getUser();

            if (loginUser.currentUser.role === "PROJECT_MANAGER") {
                const addDepartmentButton = document.querySelector(
                    `button[data-bs-target="#add-department-modal"]`
                );
                if (addDepartmentButton) {
                    addDepartmentButton.classList.remove("d-none");
                }
                const updateButtonContainer = document.getElementById("updateButtonContainer");
                    updateButtonContainer.innerHTML =
                        '<button id="updateButton" type="button" class="btn btn-primary">Update</button>';
                document.querySelector("#updateButton").addEventListener("click", function () {
                        var internalReviewCount =
                            document.getElementById(
                                "project-internal-review-count"
                            ).value;
                        var externalReviewCount =
                            document.getElementById(
                                "project-external-review-count"
                            ).value;
                        var data = {
                            internal_review_count: internalReviewCount,
                            external_review_count: externalReviewCount,
                        };
                        fetch(
                            "/api/review/update-review/" +
                                targetData.id,
                            {
                                method: "PUT",
                                headers: {
                                    "Content-Type": "application/json",
                                },
                                body: JSON.stringify(data),
                            }
                        )
                        .then((response) => response.json())
                        .then((data) => {
                            console.log(
                                "Review counts updated successfully:",
                                data
                            );
                        })
                        .catch((error) => {
                            console.error(
                                "Error updating review counts:",
                                error
                            );
                        });
                    });
                
                    const updateButtonCon = document.getElementById("updateButtonContainer");
                    updateButtonCon.innerHTML =
                        '<button type="submit" class="btn btn-primary">Update</button>';
                    document
                        .querySelector("#deliverable-type-form")
                        .addEventListener("submit", function (event) {
                            event.preventDefault();
                            let deliverableList = [];
                            targetData.deliverableDto.forEach((a) => {
                                const checkbox = document.querySelector(
                                    `#checkbox-${a.id}`
                                );
                                if (checkbox.checked) {
                                    deliverableList.push({
                                        id: a.id,
                                        status: true,
                                    });
                                }
                            });
                            console.log("deliverable", deliverableList);
                            if(deliverableList.length !== 0) {
                                fetch(`/api/deliverable/update-status`, {
                                    method: "PUT",
                                    headers: {
                                        "Content-Type": "application/json",
                                    },
                                    body: JSON.stringify(deliverableList),
                                })
                                .then((response) => response.json())
                                .then((data) => {
                                    console.log(
                                        "Status updated successfully:",
                                        data
                                    );
                                })
                                .catch((error) => {
                                    console.error(
                                        "Error updating status:",
                                    error
                                    );
                                });
                            }
                        });
                    const updateButtonC =
                    document.getElementById("updateButtonContainer");
                updateButtonC.innerHTML =
                    '<button id="update" type="button" class="btn btn-primary">Update</button>';

                document
                    .querySelector("#update")
                    .addEventListener("click", function (e) {
                        const projectId = parseInt(
                            document.querySelector(
                                "#current-edditing-projetc-id"
                            ).value
                        );

                        const amountDto = {
                            basic_design: parseInt(
                                document.querySelector(
                                    "#edit-basic-design-count"
                                ).value
                            ),
                            detail_design: parseInt(
                                document.querySelector(
                                    "#edit-detail-design-count"
                                ).value
                            ),
                            coding: parseInt(
                                document.querySelector("#edit-coding-count")
                                    .value
                            ),
                            unit_testing: parseInt(
                                document.querySelector(
                                    "#edit-unit-testing-count"
                                ).value
                            ),
                            integrated_testing: parseInt(
                                document.querySelector(
                                    "#edit-integrated-testing-count"
                                ).value
                            ),
                        };

                        $.ajax({
                            url: `/api/project/update/amount/${projectId}`, // Replace with the actual URL for your project registration endpoint
                            type: "PUT",
                            data: JSON.stringify(amountDto),
                            dataType: "json",
                            contentType: "application/json; charset=utf-8",
                            success: async function (data) {
                                // Reset the form if needed
                                console.log("this projce has benn saved", data);
                                // event.currentTarget.submit();
                            },
                            error: function (data) {
                                alert("Error registering project");
                                // event.currentTarget.submit();
                            },
                        });
                    });
                    
            }

            const clientList = await getClientList();

            console.log(clientList);

            const clientSelect = document.querySelector("select[id='client']");


            clientList.forEach((client) => {
                const option = document.createElement("option");
                option.value = JSON.stringify(client);
                option.textContent = client.name;

                clientSelect.append(option);
            });

            function initializeTagify(input, whiteList) {
                return new Tagify(input, {
                    whitelist: whiteList.map((item) => item.tech_name),
                    dropdown: {
                        consoleLog: true,
                        classname: "tags-look",
                        enabled: 0,
                        closeOnSelect: false,
                    },
                });
            }

            let deliTypeList = await getDeliverableTypeList();

            getDeliverableTypeList().then((deliType) => {
                const deliTypeSelect = document.querySelector("#deliverable");
                console.log(deliType);
                const a = new Tagify(deliTypeSelect, {
                    whitelist: deliType.map((item) => item.type),
                    dropdown: {
                        consoleLog: true,
                        classname: "tags-look",
                        enabled: 0,
                        closeOnSelect: false,
                    },
                });

                $("#validation-form").submit(function (event) {


                    const deli =
                        this.querySelector("#deliverable").value === ""
                            ? []
                            : JSON.parse(
                                  this.querySelector("#deliverable").value
                              );
                    if (deli.length !== 0) {
                        const whitelist = a.settings.whitelist;
                        deli.forEach((item) => {
                            if (!whitelist.includes(item.value)) {
                                whitelist.push(item.value);
                            }
                        });
                    }
                    console.log(a.settings.whitelist);
                });
            });

            let arcccList = await getArchitecturelist();

            // getArchitecturelist()
            //     .then((architectureList) => {
            //         const inputElement = document.querySelector(
            //             'input[name="architectures"]',
            //             {
            //                 texts: {
            //                     duplicate: "Duplicates are not allowed",
            //                     empty: "Architecture is required",
            //                 }
            //             }
            //
            //         );
            //         const a = initializeTagify(inputElement, architectureList);
            //         $("#validation-form").submit(function (event) {
            //             const arch =
            //                 inputElement.value === ""
            //                     ? []
            //                     : JSON.parse(inputElement.value);
            //
            //             if (arch.length !== 0) {
            //                 const whitelist = a.settings.whitelist;
            //                 arch.forEach((item) => {
            //                     if (!whitelist.includes(item.value)) {
            //                         whitelist.push(item.value);
            //                     }
            //                 });
            //             }
            //             console.log(a.settings.whitelist);
            //         });
            //     })
            //     .catch((error) => {
            //         console.log("Error:", error);
            //     });

            getArchitecturelist()
                .then((architectureList) => {
                    const inputElement = document.querySelector('input[name="architectures"]');
                    const tagifyInstance = initializeTagify(inputElement, architectureList);

                    // Set custom texts for Tagify validation messages
                    tagifyInstance.settings.texts = {
                        duplicate: "Duplicates are not allowed",
                        empty: "Architecture is required",
                    };

                    // Implement custom validation using the validate setting
                    tagifyInstance.settings.validate = function (tagData) {
                        if (tagData.value.trim() === "") {
                            return tagifyInstance.TEXTS.empty;
                        }

                        const isDuplicate = tagifyInstance.value.some((tag) => tag.value === tagData.value);
                        if (isDuplicate) {
                            return tagifyInstance.TEXTS.duplicate;
                        }

                        return true;
                    };

                    // Validate on form submission
                    $("#validation-form").submit(function (event) {
                        const validated = tagifyInstance.isValid;
                        if (!validated) {
                            event.preventDefault();
                        }

                        // Rest of your form submission logic...
                    });

                    // Validate on input change
                    inputElement.addEventListener('change', function () {
                        validatePrjArchitecture();
                    });
                })
                .catch((error) => {
                    console.log("Error:", error);
                });

            function validatePrjArchitecture() {
                const architectures = $('#architectures').val();
                const errorContainer = $('#architectures').siblings('.error-container');

                if (!architectures || architectures.trim().length === 0) {
                    validatedProjectForm = false;
                    if (errorContainer.length === 0) {
                        let p = $("<p>")
                            .addClass("text-danger fs-6")
                            .text("Architecture is required")
                            .css("margin", "0")
                            .addClass('error-message');

                        $('#architectures').after('<div class="error-container"></div>');
                        $('#architectures').siblings('.error-container').append(p);
                    }

                    $('#architectures').addClass('is-invalid');
                    $('#architectures').removeClass('is-valid');
                } else {
                    validatedProjectForm = true;
                    errorContainer.remove();
                    $('#architectures').addClass('is-valid');
                    $('#architectures').removeClass('is-invalid');
                }
            }


            // document.addEventListener('DOMContentLoaded', async () => {
            //     try {
            //         const arcccList = await getArchitecturelist();
            //         const inputElement = document.querySelector('input[name="architectures"]');
            //
            //         // Check if Tagify is defined and initialize it
            //         if (typeof Tagify !== 'undefined') {
            //             const tagifyInstance = new Tagify(inputElement, {
            //                 whitelist: arcccList.map(item => item.value), // Assuming arcccList is an array of objects with a 'value' property
            //                 enforceWhitelist: true,
            //                 duplicates: false,
            //                 originalInputValueFormat: valuesArr => valuesArr.map(item => item.value),
            //             });
            //
            //             // Set custom texts for validation messages
            //             tagifyInstance.settings.templates = {
            //                 dropdownItem: item => item.value,
            //             };
            //
            //             // Implement custom validation using the validate setting
            //             tagifyInstance.settings.validate = function(tagData) {
            //                 if (tagData.value.trim() === "") {
            //                     return "Architecture is required";
            //                 }
            //
            //                 const isDuplicate = tagifyInstance.value.some(tag => tag.value === tagData.value);
            //                 if (isDuplicate) {
            //                     return "Duplicates are not allowed";
            //                 }
            //
            //                 return true;
            //             };
            //
            //             // Rest of your code remains unchanged
            //             // ...
            //         } else {
            //             console.error("Tagify is not defined. Please make sure the library is loaded.");
            //         }
            //     } catch (error) {
            //         console.log("Error:", error);
            //     }
            // });
            //




            // document.addEventListener('DOMContentLoaded', async () => {
            //     try {
            //         const inputElement = document.querySelector('input[name="architectures"]');
            //
            //         inputElement.addEventListener('input', function() {
            //             const archHtml = inputElement.value.trim();
            //
            //             // Check if the input is not empty
            //             if (archHtml === "") {
            //                 alert("Architecture is required");
            //             } else {
            //                 console.log("Input value:", archHtml);
            //             }
            //         });
            //
            //         $("#validation-form").submit(function (event) {
            //             event.preventDefault();
            //
            //             // Implement your form submission logic here
            //             // For example, you can fetch the input value
            //             const archHtml = inputElement.value.trim();
            //
            //             // Perform any further processing or validation
            //
            //             // Log the value or perform other actions
            //             console.log("Input value on form submit:", archHtml);
            //         });
            //     } catch (error) {
            //         console.log("Error:", error);
            //     }
            // });




            // document.addEventListener('DOMContentLoaded', async () => {
            //     try {
            //         const arcccList = await getArchitecturelist();
            //         const inputElement = document.querySelector('input[name="architectures"]');
            //         const tagifyInstance = initializeTagify(inputElement, arcccList);
            //
            //         const selectElement = document.querySelector('select[name="yourSelectName"]'); // Replace with the actual name of your select element
            //
            //         function isTagifyEmpty(tagifyInstance) {
            //             return tagifyInstance.value.length === 0;
            //         }
            //
            //         function isSelectEmpty(selectElement) {
            //             return selectElement.value === ""; // Adjust this check based on your select element's requirements
            //         }
            //
            //         $("#validation-form").submit(function (event) {
            //             if (isTagifyEmpty(tagifyInstance) && isSelectEmpty(selectElement)) {
            //                 event.preventDefault();
            //                 alert("Please fill in at least one field.");
            //                 return;
            //             }
            //
            //             // Handle the architectures input
            //             const archHtml = inputElement.value;
            //
            //             if (archHtml.trim() !== "") {
            //                 try {
            //                     const arch = JSON.parse(archHtml);
            //
            //                     if (Array.isArray(arch) && arch.length !== 0) {
            //                         const whitelist = tagifyInstance.settings.whitelist;
            //                         arch.forEach((item) => {
            //                             if (!whitelist.includes(item.value)) {
            //                                 whitelist.push(item.value);
            //                             }
            //                         });
            //                     } else {
            //                         event.preventDefault();
            //                         alert("Invalid input for Architectures. Please provide a valid JSON array.");
            //                     }
            //                 } catch (error) {
            //                     event.preventDefault();
            //                     alert("Error parsing JSON input for Architectures. Please provide a valid JSON array.");
            //                     console.error("JSON Parsing Error:", error);
            //                 }
            //             }
            //
            //             // Handle the select input
            //             if (isSelectEmpty(selectElement)) {
            //                 event.preventDefault();
            //                 alert("Please select a value for your select field.");
            //             }
            //
            //             console.log(tagifyInstance.settings.whitelist);
            //             console.log("Selected value from the select:", selectElement.value);
            //         });
            //     } catch (error) {
            //         console.log("Error:", error);
            //     }
            // });

            function initializeTagifyAndValidation() {
                let validatedProjectForm = false;

                // Your Tagify initialization code...

                // Validate on input change
                inputElement.addEventListener('change', function () {
                    validatePrjArchitecture();
                });
            }

            document.addEventListener('DOMContentLoaded', async () => {
                try {
                    const arcccList = await getArchitecturelist();
                    const inputElement = document.querySelector('input[name="architectures"]');
                    initializeTagifyAndValidation(arcccList, inputElement);
                } catch (error) {
                    console.error("Error:", error);
                }
            });



            // document.addEventListener('DOMContentLoaded', async () => {
            //     try {
            //         const arcccList = await getArchitecturelist();
            //         const inputElement = document.querySelector('input[name="architectures"]');
            //         const tagifyInstance = initializeTagify(inputElement, arcccList);
            //
            //
            //         function isTagifyEmpty(tagifyInstance) {
            //             return tagifyInstance.value.length === 0;
            //         }
            //
            //         $("#validation-form").submit(function (event) {
            //
            //             if (isTagifyEmpty(tagifyInstance)) {
            //                 event.preventDefault();
            //                 alert("Tagify is empty. Please add at least one tag.");
            //                 return;
            //             }
            //
            //             const archHtml = inputElement.value;
            //             const archText = (new DOMParser()).parseFromString(archHtml, 'text/html').body.innerText;
            //
            //
            //             const arch = archText === "" ? [] : JSON.parse(archText);
            //
            //             const a = initializeTagify(inputElement, arch);
            //
            //             if (arch.length !== 0) {
            //                 const whitelist = a.settings.whitelist;
            //                 arch.forEach((item) => {
            //                     if (!whitelist.includes(item.value)) {
            //                         whitelist.push(item.value);
            //                     }
            //                 });
            //             }
            //
            //
            //             console.log(tagifyInstance.settings.whitelist);
            //         });
            //     } catch (error) {
            //         console.log("Error:", error);
            //     }
            // });

            const toolbaroptions = [
                // Test-style
                ["bold", "italic", "underline"],

                // Bullet points style...
                [{ list: "ordered" }, { list: "bullet" }],

                // Indentation...
                [{ indent: "+1" }, { indent: "-1" }],

                // Alignment
                [{ align: [] }],

                // Header for test, e.g., h1, h2...
                [{ header: [1, 2, 3, 4, 5, 6, false] }],

                // Adding image, link, video, or formula
                ["link"],
            ];

            // Validation For Client

            let validatedForm = $('#client-form');
            function validateName() {
                const name = $('#client-name').val();
                const errorContainer = $('#client-name').siblings('.error-container');
                if (name.length < 1) {
                    validatedForm = false;
                    if (errorContainer.length === 0) {
                        let p = $("<p>")
                            .addClass("text-danger fs-6")
                            .text("Name is required")
                            .css("margin", "0")
                            .addClass('error-message');

                        $('#client-name').after('<div class="error-container"></div>');
                        $('#client-name').siblings('.error-container').append(p);
                    }

                    $('#client-name').addClass('is-invalid');
                    $('#client-name').removeClass('is-valid');
                } else {
                    validatedForm = true;
                    errorContainer.remove();
                    $('#client-name').addClass('is-valid');
                    $('#client-name').removeClass('is-invalid');
                }
            }

            function validateEmail() {
                const email = $('#client-email').val()
                const emailRegex =
                    /^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;

                const errorContainer = $('#client-email').siblings('.error-container');
                if (emailRegex.test(email) === false) {
                    validatedForm = false;
                    if (errorContainer.length === 0) {
                        let p = $("<p>")
                            .addClass("text-danger fs-6")
                            .text("Email is required")
                            .css("margin", "0")
                            .addClass('error-message');

                        $('#client-email').after('<div class="error-container"></div>');
                        $('#client-email').siblings('.error-container').append(p);
                    }

                    $('#client-email').addClass('is-invalid');
                    $('#client-email').removeClass('is-valid');
                } else {
                    validatedForm = true;
                    errorContainer.remove();
                    $('#client-email').addClass('is-valid');
                    $('#client-email').removeClass('is-invalid');
                }
                
            }
            function validatePhone() {
                const phone = $('#client-phone').val();
                const errorContainer = $('#client-phone').siblings('.error-container');

                // Check for the phone number pattern
                const isValidPhone = /^[0-9]{11}$/.test(phone);
                if (!isValidPhone) {
                    validatedForm = false;
                    if (errorContainer.length === 0) {
                        let p = $("<p>")
                            .addClass("text-danger fs-6")
                            .text("Please enter a valid phone number with 11 digits.")
                            .css("margin", "0")
                            .addClass('error-message');

                        $('#client-phone').after('<div class="error-container"></div>');
                        $('#client-phone').siblings('.error-container').append(p);
                    }

                    $('#client-phone').addClass('is-invalid');
                    $('#client-phone').removeClass('is-valid');
                } else {
                    validatedForm = true;
                    errorContainer.remove();
                    $('#client-phone').addClass('is-valid');
                    $('#client-phone').removeClass('is-invalid');
                }
            }
            function validateClient() {
           validateName();
           validateEmail();
           validatePhone();
           return validatedForm;

        }

        $('#client-name').on('input', function () {
            validateName();
        });

        $('#client-email').on('input', function () {
            validateEmail();
        });

        $('#client-phone').on('input', function () {
            validatePhone();
        });

            document
                .querySelector("#client-form")
                .addEventListener("submit", function (e) {
                    e.preventDefault();

                    let name = document.querySelector("#client-name").value;
                    let email = document.querySelector("#client-email").value;
                    let phone = document.querySelector("#client-phone").value;

                    if (!validateClient()) {
                        return;
                    }

                    Swal.fire({
                        title: "Are you sure want to add?",
                        icon: "warning",
                        showCancelButton: true,
                        confirmButtonColor: "#3085d6",
                        cancelButtonColor: "#d33",
                        confirmButtonText: "Yes"
                    }).then((result) => {
                        if (result.isConfirmed) {
                            const clientDto = {
                                name: name,
                                email: email,
                                phone: phone,
                            };

                            console.log(clientDto);

                            $.ajax({
                                method: "POST",
                                url: "/api/client/save",
                                data: JSON.stringify(clientDto),
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (response) {
                                    console.log(response);
                                    const option = document.createElement("option");
                                    option.value = JSON.stringify(response);
                                    option.textContent = response.name;
                                    clientSelect.append(option);
                                    document.querySelector("#client-name").value = "";
                                    document.querySelector("#client-email").value = "";
                                    document.querySelector("#client-phone").value = "";
                                    showSuccess('Client Edit Successfully...');
                                },
                                error: function (error) {
                                    console.error("Error in Url : /api/client/save ", error);
                                },
                            });
                        }
                    });
                });

            const projectObjectiveEditor =
                document.querySelector(".quill-editor-full");

            const editProjectObjectiveEitor = document.querySelector(
                "#edit-project-objective"
            );

            const editObjectiveEditor = new Quill(editProjectObjectiveEitor, {
                modules: {
                    toolbar: toolbaroptions,
                },
                theme: "snow",
            });

            const addObjectiveEditor = new Quill(projectObjectiveEditor, {
                modules: {
                    toolbar: toolbaroptions,
                },
                theme: "snow",
            });

            async function getAllProjects() {
                switch (loginUser.currentUser.role) {
                    case "PROJECT_MANAGER":
                        console.log("project manager");
                        return await getData(
                            `/api/project/new/list/role/${loginUser.currentUser.role}/id/${loginUser.currentUser.id}`
                        );
                    case "DEPARTMENT_HEAD":
                        console.log("department head");
                        return await getData(
                            `/api/project/new/list/role/${loginUser.currentUser.role}/id/${loginUser.currentUser.id}`
                        );
                    case "EMPLOYEE":
                    case "CONTRACT":
                    case "FOC":
                        console.log("one of the memeber");
                        return await getData(
                            `/api/project/new/list/role/MEMBER/id/${loginUser.currentUser.id}`
                        );
                    default:
                        console.log("pmo or sdqc");
                        return await getData(`/api/project/new/list`);
                }
            }

            const motherContainer = document.querySelector("#sort-container");

            const fragment = document.createDocumentFragment();

            let pList = await getAllProjects();

            let departmentProjectId;

            if (
                loginUser.currentUser.role == "PMO" ||
                loginUser.currentUser.role == "SDQC"
            ) {
                departmentProjectId = await getData(
                    "/api/project/list/for/pmo-and-sdqc"
                );
            }

            if (departmentProjectId) {
                console.log(
                    "proejct id mapped by department id",
                    departmentProjectId
                );
            }

            console.log(pList);

            const dPList = await getData("/api/department/list");

            dPList.forEach((item) => {
                const option = document.createElement("option");
                option.value = item.id;
                option.textContent = item.name;
                document
                    .getElementById("department-filter")
                    .appendChild(option);
            });

            function updateSpanValues(amountDto) {
                // Define a mapping between keys in amountDto and the corresponding span element IDs
                const keyToSpanId = {
                    basic_design: "basic-design-count",
                    detail_design: "dd",
                    coding: "ing",
                    unit_testing: "ut",
                    integrated_testing: "it",
                };

                // Iterate through amountDto and update the span elements accordingly
                for (const key in amountDto) {
                    if (amountDto.hasOwnProperty(key)) {
                        const value = amountDto[key];
                        const spanId = keyToSpanId[key];

                        if (spanId) {
                            const spanElement = document.getElementById(spanId);
                            if (spanElement) {
                                spanElement.innerText = value;
                            }
                        }
                    }
                }
            }

            function updateListItems(a) {
                const list = document.querySelector(".list-group");
                const items = list.querySelectorAll(".list-group-item");

                // Define a mapping between keys in systemOutLineDto and the corresponding list item index
                const keyToIndex = {
                    analysis: 0,
                    sys_design: 1,
                    coding: 2,
                    testing: 3,
                    deploy: 4,
                    maintenance: 5,
                    document: 6,
                };

                // Iterate through systemOutLineDto and update the list items accordingly
                for (const key in a) {
                    if (a.hasOwnProperty(key)) {
                        const value = a[key];
                        const index = keyToIndex[key];

                        if (index !== undefined && items[index]) {
                            if (value) {
                                // Add the <i> element with the checkmark
                                items[
                                    index
                                ].innerHTML = `${key}<i class="bi bi-check2-all text-success fs-4"></i>`;
                            } else {
                                // Remove the <i> element
                                items[index].innerHTML = key;
                            }
                        }
                    }
                }
            }

            function createProjectList(project) {

                function formatDate(a) {
                    const date = new Date(a)
                    return `${date.getDate()} / ${date.getMonth() + 1} / ${date.getFullYear()}`
                }

                function getBadgeColor(status) {
                    switch (status) {
                        case 'TODO':
                        return 'primary';
                        case 'IN_PROGRESS':
                        return 'info';
                        case 'FINISHED':
                        return 'success'; // default to secondary if status is not recognized
                    }
                }
                const taskListHtml = project.tasks
                    ? project.tasks.map(task => `
                        <div class="d-flex ">
                            <div class="col p-1 text-start ps-3">
                                <span class="badge bg-${getBadgeColor(task.status)}">${task.status}</span>
                            </div>
                            <div class="col p-1 text-center">
                                ${task.title}
                            </div>
                            <div class="col p-1 text-center">
                                ${formatDate(task.plan_start_time)}
                            </div>
                            <div class="col p-1 text-center">
                                ${formatDate(task.plan_end_time)}
                            </div>
                            <div class="col p-1 text-center">${task.userDto.name}</div>
                            <div class="col p-1 text-center">
                                ${task.userDto.role}
                            </div>
                        </div>
                        `).join('')
                        : '';

                    const newProject = document.createElement("div") 
                    newProject.classList.add("accordion", "container-fluid")
                    newProject.id = `outer-project-${project.id}`

                    newProject.innerHTML += `<div class="row d-flex align-items-center col-rols-5 border border-dark" id="project-${project.id}" data-bs-toggle="modal" data-bs-target="#project-details">
                                <div class="col p-2">
                                    <div class="progress bg-light border border-primary">
                                        <div
                                            class="progress-bar progress-bar-striped progress-bar-animated"
                                            role="progressbar"
                                            style="width: ${project.percentage}%"
                                            aria-label="Basic example"
                                            aria-valuenow="${project.percentage}"
                                            aria-valuemin="0"
                                            aria-valuemax="100"
                                        >${project.percentage}%</div>
                                    </div>
                                </div>
                                <div class="col p-0 text-center card-title">${project.projectName}</div>
                                <div class="col p-0 text-center">
                                    ${formatDate(project.startDate)}
                                </div>
                                <div class="col p-0 text-center">
                                    ${formatDate(project.endDate)}
                                </div>
                                <div class="col p-0 text-center card-text">
                                    ${project.user.name}
                                </div>
                                <div class="col p-0 text-center">
                                    ${project.user.role}
                                </div>
                            </div>
                            <div
                                id="collapse-project-${project.id}"
                                class="accordion-collapse collapse border border-top-0 border-dark pb-1"
                                data-bs-parent="#project-${project.id}"
                            >
                                <div
                                    class="text-center text-white fs-5 bg-primary"
                                >
                                    Task List
                                </div>
                                ${taskListHtml}
                            </div>
                            <div 
                            class="d-flex justify-content-end rounded-1 text-white"
                            >
                                <i class="fa-solid fa-angle-down bg-primary p-1 rounded-bottom" data-bs-toggle="collapse"
                            data-bs-target="#collapse-project-${project.id}"
                            aria-expanded="true"
                            aria-controls="collapse-project-${project.id}"
                            style="cursor: pointer;"></i>
                            </div>`

                return newProject;

            }

            for (let i = pList.length - 1; i >= 0; i--) {
                let currentProject = pList[i];

                fragment.appendChild(createProjectList(currentProject));
            }

            motherContainer.appendChild(fragment);

            const detailMoal = document.querySelector("#project-details");

            function formmatDateFromMillisecondForEdit(milliseconds) {
                const date = new Date(milliseconds);

                // Get the year, month, and day from the Date object
                const year = date.getFullYear();
                const month = String(date.getMonth() + 1).padStart(2, '0'); // Months are 0-indexed, so add 1
                const day = String(date.getDate()).padStart(2, '0');

                // Create the formatted date string
                const formattedDate = year + '-' + month + '-' + day;

                return formattedDate;
            }

            motherContainer.addEventListener("click", async function (e) {
                let target = e.target;

                console.log(target.getAttribute("data-bs-target"))

                console.log(target)

                const closestProjectDiv = target.closest('[data-bs-target="#project-details"]');

                if (closestProjectDiv) {

                    console.log(closestProjectDiv.getAttribute("data-bs-target"))


                    let id = parseInt(closestProjectDiv.getAttribute("id").split("-").pop());
                    let targetData = pList.find((a) => a.id == id);

                    console.log("target id", id)

                    console.log("target id", id)

                    const currentProejctDetail = await getData(`/api/project/list/${id}`);

                    console.log(currentProejctDetail)

                    document.querySelector(
                        "#project-detail-background"
                    ).innerText = currentProejctDetail.background;

                    document.querySelector("#architectures-list-in-edit").textContent = ''

                    currentProejctDetail.architectureDto.forEach(a => {

                        const div = document.createElement("div");

                        div.classList.add("d-flex", "gap-2", "align-items-center", "justify-content-center");

                        const image = document.createElement("img");

                        image.style.width = "40px"
                        image.loading = "lazy"

                        if (languageList[a.tech_name]) {
                            image.setAttribute("src", languageList[a.tech_name]);
                        } else {
                            // Handle the case where the language is not found in the map
                            image.setAttribute("src", "/images/languages/default.png");
                        }

                        div.appendChild(image);

                        const p = document.createElement("p");
                        p.textContent = a.tech_name;
                        p.classList.add("fs-6", "fw-bold")
                        div.appendChild(p);

                        document.querySelector("#architectures-list-in-edit").appendChild(div);
                    })

                    //------------------------ architecture list end

                    //------------------------ deliverable list start
                    document.querySelector("#deliverable-type").textContent =
                        "";
                    let deliverableId;
                    currentProejctDetail.deliverableDto.forEach((a) => {
                        const div = document.createElement("div");
                        div.classList.add("d-flex", "gap-2", "align-items-center", "justify-content-center");

                        deliverableId = a.id;
                        const input = document.createElement('input');
                        input.type = 'checkbox';
                        input.setAttribute("id", `checkbox-${a.id}`)


                        if (a.status) {
                            input.checked = true;
                        }

                        const p = document.createElement("p");
                        p.textContent = a.deliverableType.type;
                        console.log(a.status)
                        console.log(a.deliverableType.type)
                        p.classList.add("fs-6", "fw-bold");
                        div.appendChild(p);
                        div.appendChild(input)

                        document.querySelector("#deliverable-type").appendChild(div);
                    });
                    //_______________________________________deliverable list end


                    //_______________________________________deliverable update alert box put
                    if (loginUser.currentUser.role === "PROJECT_MANAGER") {

                        const updateButton1 = document.getElementById("updateButton1");
                        updateButton1.innerHTML = '<button id="updateButtonDeli" type="button" class="btn btn-primary">Update</button>';

                        document.querySelector("#updateButtonDeli").addEventListener("click", async function () {

                            let deliverableList = [];

                            targetData.deliverableDto.forEach(a => {
                                const checkbox = document.querySelector(`#checkbox-${a.id}`);

                                if (checkbox.checked) {
                                    deliverableList.push({ id: a.id, status: true });
                                }
                            });

                            console.log("deliverable", deliverableList);

                            fetch(`/api/deliverable/update-status`, {
                                method: 'PUT',
                                headers: {
                                    'Content-Type': 'application/json',
                                },
                                body: JSON.stringify(deliverableList),
                            })
                                .then(response => response.json())
                                .then(data => {
                                    console.log('Status updated successfully:', data);
                                })
                                .catch(error => {
                                    console.error('Error updating status:', error);
                                });
                        });
                    }


                    //____________________________________________________deliverable update end


                    document.querySelector("#project-detail-name").value =
                        currentProejctDetail.name;

                    const objectiveQuill = new Quill(
                        "#show-project-objective",
                        {
                            modules: {
                                toolbar: false,
                            },
                            theme: "snow",
                        }
                    );

                    document.querySelector("#navigate-task").href = `/project/${currentProejctDetail.id}`

                    document.querySelector("#current-edditing-projetc-id").value = currentProejctDetail.id;

                    console.log(document.querySelector("#current-edditing-projetc-id").value)

                    objectiveQuill.enable(false);

                    objectiveQuill.root.innerHTML = '';

                    objectiveQuill.clipboard.dangerouslyPasteHTML(
                        0,
                        currentProejctDetail.objective
                    );

                    document.querySelector("#project-edit-duration").value =
                        currentProejctDetail.duration;

                    document.querySelector("#start-date").value =
                        formmatDateFromMillisecondForEdit(currentProejctDetail.start_date);

                    document.querySelector("#end-date-in-edit").value =
                        formatDateFromMilliseconds(currentProejctDetail.end_date);

                    const phaseOptionList = document.querySelectorAll("#edit-project-phase option")

                    console.log(phaseOptionList)

                    phaseOptionList.forEach(a => {
                        if (a.value === currentProejctDetail.current_phase) {
                            a.selected = true
                        }
                    })

                    editObjectiveEditor.clipboard.dangerouslyPasteHTML(
                        0,
                        currentProejctDetail.objective
                    );

                    console.log(currentProejctDetail);

                    updateListItems(currentProejctDetail.systemOutLineDto);

                    updateSpanValues(currentProejctDetail.amountDto);

                    let duration = calculateDuration(
                        currentProejctDetail.start_date,
                        currentProejctDetail.end_date
                    );
                    detailMoal.querySelector("#basic-design-count").innerText = currentProejctDetail.amountDto.basic_design;
                    detailMoal.querySelector("#detail-design-count").innerText = currentProejctDetail.amountDto.detail_design;
                    detailMoal.querySelector("#coding-count").innerText = currentProejctDetail.amountDto.coding;
                    detailMoal.querySelector("#unit-testing-count").innerText = currentProejctDetail.amountDto.unit_testing;
                    detailMoal.querySelector("#integrated-testing-count").innerText = currentProejctDetail.amountDto.integrated_testing;

                    detailMoal.querySelector("#edit-basic-design-count").value = currentProejctDetail.amountDto.basic_design;
                    detailMoal.querySelector("#edit-detail-design-count").value = currentProejctDetail.amountDto.detail_design;
                    detailMoal.querySelector("#edit-coding-count").value = currentProejctDetail.amountDto.coding;
                    detailMoal.querySelector("#edit-unit-testing-count").value = currentProejctDetail.amountDto.unit_testing;
                    detailMoal.querySelector("#edit-integrated-testing-count").value = currentProejctDetail.amountDto.integrated_testing;

                    detailMoal.querySelector(".modal-title").innerText =
                        currentProejctDetail.name;
                    detailMoal.querySelector("#project-background").innerText =
                        currentProejctDetail.background;
                    detailMoal.querySelector("#project-name").innerText =
                        currentProejctDetail.name;
                    detailMoal.querySelector(
                        "#project-department-name"
                    ).innerHTML = currentProejctDetail.departmentDto.name;
                    detailMoal.querySelector(
                        "#project-internal-review-count"
                    ).value = currentProejctDetail.reviewDto.internal_review_count;
                    detailMoal.querySelector(
                        "#project-external-review-count"
                    ).value = currentProejctDetail.reviewDto.external_review_count;
                    //______________________________________________

                    //_______________review update
                    if (loginUser.currentUser.role === "PROJECT_MANAGER") {

                        const updateButtonContainer = document.getElementById("updateButtonContainer");
                        updateButtonContainer.innerHTML = '<button id="updateButton" type="button" class="btn btn-primary">Update</button>';
                    document.querySelector("#updateButton").addEventListener("click", async function () {

                        var internalReviewCount = document.getElementById("project-internal-review-count").value;
                        var externalReviewCount = document.getElementById("project-external-review-count").value;


                        var data = {
                            internal_review_count: internalReviewCount,
                            external_review_count: externalReviewCount
                        };


                        fetch("/api/review/update-review/" + targetData.id, {
                            method: 'PUT',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify(data),
                        })
                            .then(response => response.json())
                            .then(data => {
                                console.log('Review counts updated successfully:', data);

                            })
                            .catch(error => {
                                console.error('Error updating review counts:', error);

                            });
                    });



                    }


                    //____________________________________reveiw update end
                    detailMoal.querySelector(
                        "#project-duration"
                    ).innerText = `${currentProejctDetail.duration} ${currentProejctDetail.duration < 1 ? " month" : " months"}`;
                    detailMoal.querySelector("#project-start-date").innerText =
                        formatDateFromMilliseconds(currentProejctDetail.start_date);
                    detailMoal.querySelector("#project-end-date").innerText =
                        formatDateFromMilliseconds(currentProejctDetail.end_date);
                    detailMoal.querySelector(
                        "#project-current-phase"
                    ).innerText = currentProejctDetail.current_phase;
                    detailMoal.querySelector(
                        "#client-email-address"
                    ).innerHTML = currentProejctDetail.clientDto.email;
                    detailMoal.querySelector(
                        "#client-phone-contect"
                    ).innerHTML = currentProejctDetail.clientDto.phone;
                    detailMoal.querySelector(
                        "#my-dear-customer-name"
                    ).innerHTML = currentProejctDetail.clientDto.name;
                }

                //_____________________________________________
            });

            const editProjectObjective = document.querySelector("#edit-project-objective");


            document.querySelector("#project-detail-edit-form").addEventListener("submit", function (e) {
                e.preventDefault()
                Swal.fire({
                    title: "Are you sure want to edit?",
                    icon: "warning",
                    showCancelButton: true,
                    confirmButtonColor: "#3085d6",
                    cancelButtonColor: "#d33",
                    confirmButtonText: "Yes"
                }).then((result) => {
                    if (result.isConfirmed) {

                        const project = {
                            id: parseInt(document.querySelector("#current-edditing-projetc-id").value),
                            name: document.querySelector("#project-detail-name").value,
                            duration: parseInt(document.querySelector("#project-edit-duration").value),
                            start_date: new Date(document.querySelector("#start-date").value).getTime(),
                            background: document.querySelector("#project-detail-background").value,
                            end_date: new Date(document.querySelector("#end-date-in-edit").value).getTime(),
                            current_phase: document.querySelector("#edit-project-phase").value,
                            objective: editObjectiveEditor.root.innerHTML
                        }

                        console.log(project)

                        $.ajax({
                            url: `/api/project/update`, // Replace with the actual URL for your project registration endpoint
                            type: "PUT",
                            data: JSON.stringify(project),
                            dataType: "json",
                            contentType: "application/json; charset=utf-8",
                            success: async function (data) {
                                alert("Project registered successfully");
                                // Reset the form if needed
                                console.log("this projce has benn saved", data);
                                // event.currentTarget.submit();
                                window.top.location = window.top.location;
                            },
                            error: function (data) {
                                alert("Error registering project");
                                // event.currentTarget.submit();
                                window.top.location = window.top.location;
                            },
                        });
                    }
                });
            })

            if (loginUser.currentUser.role === "PROJECT_MANAGER") {

                const updateButtonC = document.getElementById("updateButtonC");
                updateButtonC.innerHTML = '<button id="update" type="button" class="btn btn-primary">Update</button>';

                document.querySelector("#update").addEventListener("click", function (e) {

                    const projectId = parseInt(document.querySelector("#current-edditing-projetc-id").value)

                    const amountDto = {
                        basic_design: parseInt(document.querySelector("#edit-basic-design-count").value),
                        detail_design: parseInt(document.querySelector("#edit-detail-design-count").value),
                        coding: parseInt(document.querySelector("#edit-coding-count").value),
                        unit_testing: parseInt(document.querySelector("#edit-unit-testing-count").value),
                        integrated_testing: parseInt(document.querySelector("#edit-integrated-testing-count").value)
                    }

                    $.ajax({
                        url: `/api/project/update/amount/${projectId}`, // Replace with the actual URL for your project registration endpoint
                        type: "PUT",
                        data: JSON.stringify(amountDto),
                        dataType: "json",
                        contentType: "application/json; charset=utf-8",
                        success: async function (data) {
                            alert("Project registered successfully");
                            // Reset the form if needed
                            console.log("this projce has benn saved", data);
                            // event.currentTarget.submit();
                            window.top.location = window.top.location;
                        },
                        error: function (data) {
                            alert("Error registering project");
                            // event.currentTarget.submit();
                            window.top.location = window.top.location;
                        },
                    });
                })
            }

            const sortProjectByDepartment = await getData(
                "/api/project/list/sort/by/department"
            );

            document
                .getElementById("department-filter")
                .addEventListener("change", function () {
                    const allDiv = motherContainer.children;
                    const selectedDepartmentId = this.value;
                    console.log(sortProjectByDepartment)
                    console.log(selectedDepartmentId)
                    console.log(sortProjectByDepartment[parseInt(selectedDepartmentId)])
                    if (sortProjectByDepartment.hasOwnProperty(parseInt(selectedDepartmentId))) {
                        for (let i = 0; i < allDiv.length; i++) {
                            if (
                                sortProjectByDepartment[
                                    selectedDepartmentId
                                ].includes(parseInt(allDiv[i].id.split("-").pop()))
                            ) {
                                allDiv[i].style.display = "block";
                            } else {
                                allDiv[i].style.display = "none";
                            }
                        }
                    } else {
                        // If selected department has no projects, set all divs to display: none
                        for (let i = 0; i < allDiv.length; i++) {
                            allDiv[i].style.display = "none";
                        }
                    }
                });

            const monthFilter = document.querySelector("#month-filter");
            const yearFilterSelect = document.getElementById("year-filter");

            document.querySelectorAll("select[action='filter']").forEach((a) =>
                a.addEventListener("input", function (e) {
                    const allData =
                        document.getElementById("sort-container").children;
                    const currentTime = monthFilter.value;
                    const yearValue = parseInt(yearFilterSelect.value);

                    const matchingProjects = pList.filter((a) => {
                        const projectDate = new Date(a.startDate);
                        const projectMonth = projectDate.getMonth();
                        const projectYear = projectDate.getFullYear();
                        return (
                            projectYear === yearValue &&
                            MONTH_NAMES[projectMonth] === currentTime
                        );
                    });

                    for (let i = 0; i < allData.length; i++) {
                        console.log(allData[i])
                        const divId = parseInt(
                            allData[i].getAttribute("id").split("-").pop()
                        );

                        if (
                            matchingProjects.some(
                                (project) => project.id === divId
                            )
                        ) {
                            allData[i].style.display = "block";
                        } else {
                            allData[i].style.display = "none";
                        }
                    }
                })
            );

            const currentYear = new Date().getFullYear();

            document
                .querySelector("#reset-btn")
                .addEventListener("click", function (e) {
                    let allData =
                        document.getElementById("sort-container").children;

                    for (let i = 0; i < allData.length; i++) {
                        allData[i].style.display = "block";
                    }
                    monthFilter.value = MONTH_NAMES[0];
                });

            console.log("error");

            let quillEditors = document.querySelectorAll(
                ".quill-editor-bubble"
            );

            // Initialize Quill for each selected element
            quillEditors.forEach(function (editor) {
                new Quill(editor, {
                    modules: {
                        toolbar: toolbaroptions,
                    },
                    theme: "snow",
                });
            });

            // function getData() {
            //     const userInput = quill.root.innerHTML;
            //     console.log(userInput);
            // }

            let minusButtons = document.querySelectorAll(".minus");
            let plusButtons = document.querySelectorAll(".plus");

            minusButtons.forEach(function (minusButton) {
                minusButton.addEventListener("click", function () {
                    let input = this.parentElement.querySelector("input");
                    let count = parseInt(input.value) - 1;
                    count = count < 0 ? 0 : count;
                    input.value = count;
                    console.log(input, count);
                    //input.dispatchEvent(new Event('change'));
                    return false;
                });
            });

            plusButtons.forEach(function (plusButton) {
                plusButton.addEventListener("click", function () {
                    let input = this.parentElement.querySelector("input");
                    input.value = parseInt(input.value) + 1;
                    //input.dispatchEvent(new Event('change'));
                    return false;
                });
            });

            let employeeList;

            if(loginUser.currentUser.role === 'PROJECT_MANAGER') {

                employeeList = await getData("/api/currentuser/available/employees");
            }

            if(loginUser.currentUser.role === 'SDQC' || loginUser.currentUser.role === 'PMO') {
                document.querySelector("#department-filter-container").classList.remove("d-none");
            }

            console.log("EMPLOYEE LIST : " , employeeList);

            let empTagifyList = [];

            if (employeeList) {
                const showEmpList = employeeList.map((item) => {
                    console.log(item);
                    return {
                        label: item.name,
                        value: item.id,
                        alias: item.role.toLowerCase(),
                    };
                });
                empTagifyList = VirtualSelect.init({
                    ele: "#employee-list",
                    options: showEmpList,
                    multiple: true,
                    search: true,
                    searchByStartsWith: true,
                    popupPosition: null,
                    maxWidth: "100%",
                });
                console.log(empTagifyList);
            }

            $(document).ready(function () {
                document
                    .querySelector("#start_date")
                    .addEventListener("change", function () {
                        const projectDruation = document.querySelector(
                            "#project-add-duration"
                        ).value;

                        const projectEndDate = document.querySelector(
                            "#project-add-end-date"
                        );

                        const endDate = calculateEndDate(
                            new Date(this.value).getTime(),
                            projectDruation
                        );

                        projectEndDate.value = formatDateFromMilliseconds(
                            endDate.getTime()
                        );
                    });

                document.querySelector("#start-date").addEventListener("change", function () {
                    const projectDruation = document.querySelector(
                        "#project-edit-duration"
                    ).value;

                    const projectEndDate = document.querySelector(
                        "#end-date-in-edit"
                    );

                    const endDate = calculateEndDate(
                        new Date(this.value).getTime(),
                        projectDruation
                    );

                    projectEndDate.value = formatDateFromMilliseconds(
                        endDate.getTime()
                    );
                });

                document
                    .querySelector("#project-add-duration")
                    .addEventListener("input", function () {
                        const projectStartDate =
                            document.querySelector("#start_date").value;

                        if (projectStartDate !== "") {
                            const projectEndDate = document.querySelector(
                                "#project-add-end-date"
                            );

                            // Calculate the end date only when there's a valid start date
                            const endDate = calculateEndDate(
                                new Date(projectStartDate).getTime(),
                                this.value
                            );

                            // Check if endDate is not NaN
                            if (!isNaN(endDate)) {
                                projectEndDate.value =
                                    formatDateFromMilliseconds(endDate);
                            }
                        }
                    });

                document.querySelector("#project-edit-duration").addEventListener("input", function () {
                    const projectStartDate =
                        document.querySelector("#start-date").value;

                    if (projectStartDate !== "") {
                        const projectEndDate = document.querySelector(
                            "#end-date-in-edit"
                        );

                        // Calculate the end date only when there's a valid start date
                        const endDate = calculateEndDate(
                            new Date(projectStartDate).getTime(),
                            this.value
                        );

                        // Check if endDate is not NaN
                        if (!isNaN(endDate)) {
                            projectEndDate.value =
                                formatDateFromMilliseconds(endDate);
                        }
                    }
                });


                // Validation for project
                let validatedProjectForm = false;

                console.log("validation eeee");
                function validateProjectName() {
                    const prjName = $('#name').val();
                    const errorContainer = $('#name').siblings('.error-container');

                    if (prjName.trim().length < 1) {
                        validatedProjectForm = false;
                        if (errorContainer.length === 0) {
                            let p = $("<p>")
                                .addClass("text-danger fs-6")
                                .text("Project Name is required")
                                .css("margin", "0");
                            $('#name').after('<div class="error-container"></div>');
                            $('#name').siblings('.error-container').append(p);
                        }
                        $('#name').addClass('is-invalid');
                        $('#name').removeClass('is-valid');
                    } else {
                        validatedProjectForm = true;
                        errorContainer.remove();
                        $('#name').addClass('is-valid');
                        $('#name').removeClass('is-invalid');
                    }
                }

                function validateProjectClient() {
                    const prjclient = $('#client').val();
                    const errorContainer = $('#client').siblings('.error-container');
                    if (!prjclient  || prjclient .length === 0) {
                        validatedProjectForm  = false;
                        if (errorContainer.length === 0) {
                            let p = $("<p>")
                                .addClass("text-danger fs-6")
                                .text("Client is required")
                                .css("margin", "0")
                                .addClass('error-message');

                            $('#client').after('<div class="error-container"></div>');
                            $('#client').siblings('.error-container').append(p);
                        }

                        $('#client').addClass('is-invalid');
                        $('#client').removeClass('is-valid');
                    } else {
                        validatedProjectForm  = true;
                        errorContainer.remove();
                        $('#client').addClass('is-valid');
                        $('#client').removeClass('is-invalid');
                    }
                }


                function validateProjectEmployee() {
                    const employeelist = $('#employee-list').val();
                    const errorContainer = $('#employee-list').siblings('.error-container');
                    if (!employeelist  || employeelist .length === 0) {
                        validatedProjectForm  = false;
                        if (errorContainer.length === 0) {
                            let p = $("<p>")
                                .addClass("text-danger fs-6")
                                .text("Employee is required")
                                .css("margin", "0")
                                .addClass('error-message');

                            $('#employee-list').after('<div class="error-container"></div>');
                            $('#employee-list').siblings('.error-container').append(p);
                        }

                        $('#employee-list').css('border', '1px solid #dc3545');
                    } else {
                        validatedProjectForm  = true;
                        errorContainer.remove();
                        $('#employee-list').css('border', '1px solid #28a745');

                    }
                }


                function validatePrjDuration() {
                    const prjduration = $('#project-add-duration').val();
                    const errorContainer = $('#project-add-duration').siblings('.error-container');
                    if (prjduration.length < 1) {
                        validatedProjectForm  = false;
                        if (errorContainer.length === 0) {
                            let p = $("<p>")
                                .addClass("text-danger fs-6")
                                .text("End duration is required")
                                .css("margin", "0")
                                .addClass('error-message');

                            $('#project-add-duration').after('<div class="error-container"></div>');
                            $('#project-add-duration').siblings('.error-container').append(p);
                        }

                        $('#project-add-duration').addClass('is-invalid');
                        $('#project-add-duration').removeClass('is-valid');
                    } else {
                        validatedProjectForm  = true;
                        errorContainer.remove();
                        $('#project-add-duration').addClass('is-valid');
                        $('#project-add-duration').removeClass('is-invalid');
                    }
                }


                function validatePrjBackground() {
                    const background = $('#background').val();
                    const errorContainer = $('#background').siblings('.error-container');
                    if (background.length < 1) {
                        validatedProjectForm  = false;
                        if (errorContainer.length === 0) {
                            let p = $("<p>")
                                .addClass("text-danger fs-6")
                                .text("Background is required")
                                .css("margin", "0")
                                .addClass('error-message');

                            $('#background').after('<div class="error-container"></div>');
                            $('#background').siblings('.error-container').append(p);
                        }

                        $('#background').addClass('is-invalid');
                        $('#background').removeClass('is-valid');
                    } else {
                        validatedProjectForm  = true;
                        errorContainer.remove();
                        $('#background').addClass('is-valid');
                        $('#background').removeClass('is-invalid');
                    }
                }

                function validatePrjArchitecture() {
                    const architectures = $('#architectures').val();
                    const errorContainer = $('#architectures').siblings('.error-container');

                    if (!architectures || architectures.trim().length === 0) {
                        validatedProjectForm = false;
                        if (errorContainer.length === 0) {
                            let p = $("<p>")
                                .addClass("text-danger fs-6")
                                .text("Architecture is required")
                                .css("margin", "0")
                                .addClass('error-message');

                            $('#architectures').after('<div class="error-container"></div>');
                            $('#architectures').siblings('.error-container').append(p);
                        }

                        $('#architectures').addClass('is-invalid');
                        $('#architectures').removeClass('is-valid');
                    } else {
                        validatedProjectForm = true;
                        errorContainer.remove();
                        $('#architectures').addClass('is-valid');
                        $('#architectures').removeClass('is-invalid');
                    }
                }

                // Function to validate systemOutlines
                function validatePrjSystemOutline() {
                    const systemOutlines = $('#systemOutlines').text().trim();
                    const errorContainer = $('#systemOutlines').siblings('.error-container');

                    if (systemOutlines.length === 0) {
                        validatedProjectForm = false;
                        if (errorContainer.length === 0) {
                            let p = $("<p>")
                                .addClass("text-danger fs-6")
                                .text("System Outlines is required")
                                .css("margin", "0")
                                .addClass('error-message');

                            $('#systemOutlines').after('<div class="error-container"></div>');
                            $('#systemOutlines').siblings('.error-container').append(p);
                        }

                        $('#systemOutlines').css('border', '1px solid #dc3545'); // Red border color for invalid state
                    } else {
                        validatedProjectForm = true;
                        errorContainer.remove();
                        $('#systemOutlines').css('border', '1px solid #28a745'); // Green border color for valid state
                    }

                }

                function validatePrjDeliverable() {
                    const deliverable = $('#deliverable').val();
                    const errorContainer = $('#deliverable').siblings('.error-container');

                    if (!deliverable || deliverable.trim().length === 0) {
                        validatedProjectForm = false;
                        if (errorContainer.length === 0) {
                            let p = $("<p>")
                                .addClass("text-danger fs-6")
                                .text("Deliverable is required")
                                .css("margin", "0")
                                .addClass('error-message');

                            $('#deliverable').after('<div class="error-container"></div>');
                            $('#deliverable').siblings('.error-container').append(p);
                        }

                        // $('#deliverable').addClass('is-invalid');
                        // $('#deliverable').removeClass('is-valid');

                        $('#deliverable').css('border', '1px solid #dc3545');
                    } else {
                        validatedProjectForm = true;
                        errorContainer.remove();
                        // $('#deliverable').addClass('is-valid');
                        // $('#deliverable').removeClass('is-invalid');
                        $('#deliverable').css('border', '1px solid #28a745');
                    }
                }


                function validatePrjObjective() {
                    const objective = $('#objective').val();
                    const errorContainer = $('#objective').siblings('.error-container');

                    if (!objective || objective.trim().length === 0) {
                        validatedProjectForm = false;
                        if (errorContainer.length === 0) {
                            let p = $("<p>")
                                .addClass("text-danger fs-6")
                                .text("Objective is required")
                                .css("margin", "0")
                                .addClass('error-message');

                            $('#objective').after('<div class="error-container"></div>');
                            $('#objective').siblings('.error-container').append(p);
                        }

                        $('#objective').addClass('is-invalid');
                        $('#objective').removeClass('is-valid');
                    } else {
                        validatedProjectForm = true;
                        errorContainer.remove();
                        $('#objective').addClass('is-valid');
                        $('#objective').removeClass('is-invalid');
                    }
                }



                function validateStartDate() {
                    const start_date = $('#start_date').val();
                    const errorContainer = $('#start_date ').siblings('.error-container');
                    if (start_date .length === 0) {
                        validatedProjectForm =true;
                        if (errorContainer.length === 0) {
                        let p = $("<p>")
                            .addClass("text-danger fs-6")
                            .text("Date is required")
                            .css("margin", "0")
                            .addClass('error-message');

                        $('#start_date ').after('<div class="error-container"></div>');
                        $('#start_date ').siblings('.error-container').append(p);
                    }

                    $('#start_date ').addClass('is-invalid');
                    $('#start_date ').removeClass('is-valid');

                    } else {
                        validatedProjectForm  = true;
                        errorContainer.remove();
                        $('#start_date').addClass('is-valid');
                        $('#start_date').removeClass('is-invalid');
                    }
                }



                $('#name').on('input', function () {
                    validateProjectName();
                });

                $('#client').on('change', function () {
                    validateProjectClient();
                });

                $('#employee-list').on('change', function () {
                    validateProjectEmployee();
                });

                $('#start-date').on('input', function () {
                    validateStartDate();
                });


                $('#project-add-duration').on('input', function () {
                    validatePrjDuration();
                });

                $('#background').on('input', function () {
                    validatePrjBackground();
                });

                $('#architectures').on('input', function () {
                    validatePrjArchitecture();
                });

                $('#deliverable').on('input', function () {
                    validatePrjDeliverable();
                });

                $('#systemOutlines').on('content-updated', function () {
                    validatePrjSystemOutline();
                });


                $('#objective').on('input', function () {
                    validatePrjObjective();
                });

                $('#start_date').on('input',function () {
                    validateStartDate();
                });


                function validateProject() {
                    validateProjectName();
                    validateProjectClient();
                    validateProjectEmployee();
                    validatePrjDuration();
                    validatePrjBackground();
                    validatePrjArchitecture();
                    validatePrjDeliverable();
                    validatePrjSystemOutline();
                    validatePrjObjective();
                    validateStartDate();
                    return validatedProjectForm ;

                }



                $("#project-add-btn").on('click', function (event) {
                    console.log("submitted")
                    event.preventDefault(); // Prevent the form from submitting the traditional way


                    if (!validateProject()) {
                        return;
                    }

                    const projectName = $("#name").val();
                    const client = JSON.parse($("#client").val());
                    const startDate = new Date(
                        $("#start_date").val()
                    ).getTime();
                    const duration = +$("#project-add-duration").val();

                    const background = $("#background").val();
                    let architectures = $("#architectures").val();
                    const empList = empTagifyList.selectedValues;
                    console.log("architectures list : ", architectures);
                    const systemOutlines = sysSelect.selectedValues;
                    const deliverable = $("#deliverable").val();
                    const objective = addObjectiveEditor.root.innerHTML; // Assuming you're using a WYSIWYG editor like Quill
                    console.log(
                        projectName,
                        client,
                        startDate,
                        duration,
                        background,
                        architectures,
                        empList,
                        systemOutlines,
                        deliverable,
                        objective
                    );




                    let jsonData = ''; // replace with your actual JSON data
                    if (jsonData.trim() !== '') {
                        try {
                            let parsedData = JSON.parse(jsonData);
                            // Continue processing parsedData
                        } catch (error) {
                            console.error('Error parsing JSON:', error);
                        }
                    } else {
                        console.warn('JSON data is empty.');
                    }

                    architectures = JSON.parse(architectures);

                    const arcList = architectures.map((ar) => {
                        const matchingObj = arcccList.find(
                            (arccObj) => arccObj.tech_name === ar.value
                        );
                        console.log(matchingObj);
                        return matchingObj
                            ? matchingObj
                            : { tech_name: ar.value };
                    });

                    const oldDeliTypeList = JSON.parse(deliverable);

                    const deliverTypeList = oldDeliTypeList.map((deli) => {
                        const matchingObj = deliTypeList.find(
                            (deliObj) => deliObj.type === deli.value
                        );
                        console.log(matchingObj);
                        return matchingObj ? matchingObj : { type: deli.value };
                    });

                    const deliverableList = deliverTypeList.map(deli => {
                        return {
                            status : false,
                            deliverableType : deli
                        }
                    });



                    if(!validateProject()){
                        return;
                    }

                    // You may want to add some form validation here before sending the data
                    console.log(objective);
                    console.log(architectures);
                    console.log(empList);
                    console.log(deliverTypeList);

                    Swal.fire({
                        title: "Are you sure want to edit?",
                        icon: "warning",
                        showCancelButton: true,
                        confirmButtonColor: "#3085d6",
                        cancelButtonColor: "#d33",
                        confirmButtonText: "Yes",
                    }).then((result) => {
                        if (result.isConfirmed) {
                            const project = {
                                name: projectName,
                                clientDto: client,
                                duration: duration,
                                start_date: startDate,
                                end_date: calculateEndDate(
                                    startDate,
                                    duration
                                ).getTime(),
                                background: background,
                                architectureDto: arcList,
                                systemOutLineDto: systemOutlines.reduce(
                                    (acc, cur) => {
                                        acc[cur] = true;
                                        return acc;
                                    },
                                    {}
                                ),
                                current_phase: "PLANNING",
                                deliverableDto: deliverableList,
                                objective: objective,
                                amountDto: {
                                    basic_design: 0,
                                    detail_design: 0,
                                    coding: 0,
                                    unit_testing: 0,
                                    integrated_testing: 0,
                                },
                                departmentDto: {
                                    id: loginUser.currentUser.department.id,
                                },
                                projectManagerUserDto: {
                                    id: loginUser.currentUser.id,
                                },
                                membersUserDto: empList.map((str) => ({
                                    id: parseInt(str),
                                })),
                            };

                            console.log(project);
                            //Perform the AJAX request
                            $.ajax({
                                url: "/api/project/save", // Replace with the actual URL for your project registration endpoint
                                type: "POST",
                                data: JSON.stringify(project),
                                dataType: "json",
                                contentType: "application/json; charset=utf-8",
                                success: async function (data) {
                                    alert("Project registered successfully");
                                    // Reset the form if needed
                                    $("#validation-form")[0].reset();
                                    createProjectList(data)
                                },
                                error: function (data) {
                                    alert("Error registering project");
                                },
                            });
                        }
                    });
                });
            });

            document
                .querySelector("#update-amount-btn")
                .addEventListener("click", function (e) {
                    const projectId = parseInt(
                        document.querySelector("#current-edditing-projetc-id")
                            .value
                    );

                    const amountDto = {
                        basic_design: parseInt(
                            document.querySelector("#edit-basic-design-count")
                                .value
                        ),
                        detail_design: parseInt(
                            document.querySelector("#edit-detail-design-count")
                                .value
                        ),
                        coding: parseInt(
                            document.querySelector("#edit-coding-count").value
                        ),
                        unit_testing: parseInt(
                            document.querySelector("#edit-unit-testing-count")
                                .value
                        ),
                        integrated_testing: parseInt(
                            document.querySelector(
                                "#edit-integrated-testing-count"
                            ).value
                        ),
                    };

                    Swal.fire({
                        title: "Are you sure want to edit?",
                        icon: "warning",
                        showCancelButton: true,
                        confirmButtonColor: "#3085d6",
                        cancelButtonColor: "#d33",
                        confirmButtonText: "Yes"
                    }).then((result) => {
                        if (result.isConfirmed) {

                            //Perform the AJAX request
                            $.ajax({
                                url: "/api/project/save", // Replace with the actual URL for your project registration endpoint
                                type: "POST",
                                data: JSON.stringify(project),
                                dataType: "json",
                                contentType: "application/json; charset=utf-8",
                                success: async function (data) {
                                    alert("Project registered successfully");
                                    // Reset the form if needed
                                    console.log(
                                        "This project has been saved",
                                        data
                                    );
                                },
                                error: function (data) {
                                    Swal.fire(
                                        "Error",
                                        "Error updating project amount",
                                        "error"
                                    );
                                },
                            });
                        }
                    });

                });
            

            let myOptions = [
                {
                    label: "Analysis",
                    value: "analysis",
                    alias: "analysis",
                },
                {
                    label: "System Design",
                    value: "sys_design",
                    alias: "system design",
                },
                {
                    label: "Coding",
                    value: "coding",
                    alias: "coding",
                },
                {
                    label: "Testing",
                    value: "testing",
                    alias: "testing",
                },
                {
                    label: "Deploy",
                    value: "deploy",
                    alias: "deploy",
                },
                {
                    label: "Maintenance",
                    value: "maintenance",
                    alias: "maintenance",
                },
                {
                    label: "Document",
                    value: "document",
                    alias: "document",
                },
            ];

            let sysSelect = VirtualSelect.init({
                ele: "#systemOutlines",
                options: myOptions,
                multiple: true,
                search: true,
                searchByStartsWith: false,
                popupPosition: null,
                maxWidth: "100%",
            });

            console.log("SYSSELECT" , sysSelect);



            $(".circle-progress").each(function () {
                const minValue = $(this).attr("data-min-value");
                const maxValue = $(this).attr("data-max-value");
                const value = $(this).attr("data-value");
                const type = $(this).attr("data-type");

                console.log("minValue : " , minValue);
                console.log("maxValue : " , maxValue);
                console.log("value : " , value);
                console.log("type : " , type);


                if (value < 40) {
                    this.classList.add("circle-progress-secondary");
                } else if (value < 70) {
                    this.classList.add("circle-progress-primary");
                } else if (value > 69) {
                    this.classList.add("circle-progress-success");
                }

                if (this.id !== "" && this.id !== null) {
                    new CircleProgress("#" + this.id, {
                        min: minValue,
                        max: maxValue,
                        value: value,
                        textFormat: type,
                    });
                }
            });

            //list project end
        </script>


    </head>

    <body>
        <div class="container-fluid position-relative bg-white d-flex p-0">
            <!-- Spinner Start -->
            <div
                id="spinner"
                class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center"
            >
                <div
                    class="spinner-border text-primary"
                    style="width: 3rem; height: 3rem"
                    role="status"
                >
                    <span class="sr-only">Loading...</span>
                </div>
            </div>
            <!-- Spinner End -->

            <div th:replace="~{fragments/sidebar :: sidebar}"></div>

            <!-- Content Start -->
            <div
                class="content"
                style="
                    background-color: #e5e5f7;
                    opacity: 1;
                    background-image: radial-gradient(
                        #444cf7 0.6000000000000001px,
                        #e5e5f7 0.6000000000000001px
                    );
                    background-size: 12px 12px;
                "
            >
                <div
                    th:replace="~{fragments/navigation :: navigation-without-search}"
                ></div>
                <!-- Search Start -->
                <div
                    class="container-fluid pt-2 ps-s pe-2"
                    id="dropdrown-search-bar"
                >
                    <div class="d-flex flex-row justify-content-end gap-2">
                        <button class="btn btn-info" id="reset-btn">
                            reset
                        </button>
                        <div class="d-inline-block">
                            <select
                                id="month-filter"
                                class="form-control"
                                action="filter"
                            >
                                <option value="January">January</option>
                                <option value="February">February</option>
                                <option value="Match">Match</option>
                                <option value="April">April</option>
                                <option value="May">May</option>
                                <option value="June">June</option>
                                <option value="July">July</option>
                                <option value="Auguest">Auguest</option>
                                <option value="September">September</option>
                                <option value="October">October</option>
                                <option value="November">November</option>
                                <option value="December">December</option>
                            </select>
                        </div>
                        <div class="d-inline-block d-none" id="department-filter-container">
                            <select
                                id="department-filter"
                                class="form-control"
                            ></select>
                        </div>
                        <div class="d-inline-block">
                            <select
                                id="year-filter"
                                class="form-control"
                                action="filter"
                            >
                                <option value="2011">2011</option>
                                <option value="2012">2012</option>
                                <option value="2013">2013</option>
                                <option value="2014">2014</option>
                                <option value="2015">2015</option>
                                <option value="2016">2016</option>
                                <option value="2017">2017</option>
                                <option value="2018">2018</option>
                                <option value="2019">2019</option>
                                <option value="2020">2020</option>
                                <option value="2021">2021</option>
                                <option value="2022">2022</option>
                                <option value="2023" selected>2023</option>
                            </select>
                        </div>

                        <form class="d-inline-block">
                            <input
                                class="form-control border-0"
                                type="search"
                                placeholder="Search project "
                            />
                        </form>
                        <!-- modal toggle button start -->
                        <button
                            type="button"
                            class="btn btn-light align-self-start d-none"
                            data-bs-toggle="modal"
                            data-bs-target="#add-department-modal"
                        >
                            <i class="bi bi-plus-lg"></i>
                        </button>
                        <!-- modal toggle button end -->
                        <!-- add department modal start -->

                        <!-- add department modal end -->
                        <!-- sortting button -->
                        <i class="bi bi-sort-alpha-down sort-btn text-dark"></i>

                        <!-- Modal -->
                    </div>
                </div>
                <!-- Search End -->

                <!-- project start -->
                <div
                    id="grid"
                    class="item-content animate__animated animate__fadeIn active mt-2 p-0"
                    data-toggle-extra="tab-content"
                >
                    <div
                        class=" rounded-2 px-4"
                    >
                        <div
                        class="row col-rols-6 border-bottom border border-dark fs-5 fw-bold bg-primary text-white"
                        >
                            <div class="col p-0 text-center">Status</div>
                            <div class="col p-0 text-center">Title</div>
                            <div class="col p-0 text-center">Start</div>
                            <div class="col p-0 text-center">End</div>
                            <div class="col p-0 text-center">Name</div>
                            <div class="col p-0 text-center">Role</div>
                        </div>
                        <div
                            class="p-3 d-flex flex-column gap-2"
                            style="background-color: #e5e5f7"
                            id='sort-container'
                        >
                        <!-- TODO :: SHOW ALL PROJECTS LIST START FROM HERE -->

                        <!-- TODO :: SHOW ALL PROJECTS LIST END HERE -->
                        </div>
                    </div>
                </div>
                <!-- project end -->
            </div>
            <!-- Content End -->
        </div>

        <!--    modal for add project-->
        <div
            class="modal fade"
            id="add-department-modal"
            data-bs-keyboard="false"
            tabindex="-1"
            aria-labelledby="staticBackdropLabel"
            aria-hidden="true"
        >
            <div class="modal-dialog modal-dialog-centered modal-xl">
                <div class="modal-content task-content">
                    <div class="modal-header">
                        <h2 class="modal-title fs-5" style="text-align: center">
                            Add Project
                        </h2>
                        <button
                            type="button"
                            class="btn-close"
                            data-bs-dismiss="modal"
                            aria-label="Close"
                        ></button>
                    </div>
                    <!-- Bordered Tabs -->
                    <nav>
                        <ul class="nav nav-tabs">
                            <li class="nav-item">
                                <a
                                    class="nav-link active"
                                    data-bs-toggle="tab"
                                    data-bs-target="#project-create"
                                    >Project</a
                                >
                            </li>

                            <li class="nav-item">
                                <a
                                    class="nav-link"
                                    data-bs-toggle="tab"
                                    data-bs-target="#client-create"
                                    >Client</a
                                >
                            </li>
                        </ul>
                    </nav>

                    <div class="tab-content pt-2">
                        <div
                            class="tab-pane fade show active"
                            id="project-create"
                        >
                            <div class="modal-body">
                                <!--                        project add-->
                                <form class="row g-3" id="validation-form">
                                    <div class="col-lg-6">
                                        <!--                                name input-->
                                        <label
                                            for="name"
                                            class="col-sm-12 col-form-label"
                                            name="name"
                                            >Project Name<span
                                                style="color: #dec6c6"
                                            >
                                                *</span
                                            ></label
                                        >
                                        <input
                                            type="text"
                                            class="form-control border-task-description"
                                            id="name" name="name"
                                        />
                                    </div>

                                    <!--                            client add-->
                                    <div class="col-lg-6">
                                        <label
                                            for="client"
                                            class="col-sm-12 col-form-label"
                                            name="client"
                                            >Client<span style="color: red">
                                                *</span
                                            ></label
                                        >
                                        <select
                                            class="form-select"
                                            id="client"
                                            name="client"
                                        >
                                            <option value="" selected disabled>Choose client</option>
                                        </select>
                                    </div>

                                    <!--                            start date add-->
                                    <div class="col-md-6">
                                        <label
                                            for="start_date"
                                            class="col-sm-12 col-form-label"
                                            name="start_date"
                                            >Start Date<span style="color: red">
                                                *</span
                                            ></label
                                        >
                                        <input
                                            type="date"
                                            class="form-control border-task-description"
                                            id="start_date"
                                            name="start_date"
                                        />
                                    </div>

                                    <!--                                end date add-->
                                    <div class="col-md-6">
                                        <label
                                            for="project-add-duration"
                                            class="col-sm-12 col-form-label"
                                            >Enter Duration (Month)<span
                                                style="color: red"
                                            >
                                                *</span
                                            ></label
                                        >
                                        <input
                                            type="number"
                                            class="form-control border-task-description"
                                            id="project-add-duration"
                                            min="1"
                                            value="1"
                                            required
                                            oninput="validity.valid||(value='');"
                                        />
                                    </div>

                                    <div class="col-md-6">
                                        <label
                                            for="project-add-duration"
                                            class="col-sm-12 col-form-label"
                                            >End date<span style="color: red">
                                                *</span
                                            ></label
                                        >
                                        <input
                                            type="text"
                                            disabled
                                            id="project-add-end-date"
                                            class="form-control"
                                        />
                                    </div>

                                    <!--                                background add-->
                                    <div class="col-lg-6">
                                        <label
                                            for="background"
                                            class="col-sm-12 col-form-label"
                                            name="background"
                                            >Background<span style="color: red">
                                                *</span
                                            ></label
                                        >
                                        <textarea
                                            type="text"
                                            class="form-control border-task-description"
                                            id="background"
                                            name="background"

                                        ></textarea>
                                    </div>

                                    <!--                                architectures add-->
                                    <div class="col-lg-6">
                                        <label
                                            for="architectures"
                                            class="col-sm-12 col-form-label"
                                            name="architectures"
                                            >Architecture<span
                                                style="color: red"
                                            >
                                                *</span
                                            ></label
                                        >
                                        <input
                                            type="text"
                                            class="form-control"
                                            id="architectures"
                                            name="architectures"
                                            placeholder="enter to add your own architecture"
                                            required
                                        />
                                        <div class="invalid-feedback error-container"></div>

                                    </div>

                                    <!--                                systemoutline add-->
                                    <div class="col-lg-6">
                                        <label
                                            for="systemOutlines"
                                            class="col-sm-12 col-form-label"
                                            name="systemOutlines"
                                            >System Outlines
                                            <span style="color: red"> *</span>
                                        </label>
                                        <div id="systemOutlines"></div>
                                    </div>

                                    <div class="col-lg-6">
                                        <label
                                            for="employee-list"
                                            class="col-sm-12 col-form-label"
                                            name="systemOutlines"
                                            >Choose employee
                                            <span style="color: red"> *</span>
                                        </label>
                                        <div id="employee-list"></div>
                                    </div>

                                    <!--                                deliverable add-->
                                    <div class="col-lg-6">
                                        <label
                                            for="deliverable"
                                            class="col-sm-12 col-form-label"
                                            name="deliverable"
                                            >Deliverable<span
                                                style="color: red"
                                            >
                                                *</span
                                            ></label
                                        >
                                        <input
                                            type="text"
                                            class="form-control"
                                            id="deliverable"
                                            name="enter to add your own deliverable type"
                                            placeholder="add value"
                                            required
                                        />
                                    </div>

                                    <div
                                        class="col-lg-12"
                                        style="margin-bottom: 80px"
                                    >
                                        <label for="objective"
                                            >Objective<span style="color: red">
                                                *</span
                                            ></label
                                        >
                                        <div
                                            class="quill-editor-full"
                                            id="objective"
                                            name="objective"
                                        ></div>
                                    </div>

                                    <div class="text-center">
                                        <button
                                            type="submit"
                                            class="btn btn-primary col-2"
                                            data-dismiss="modal"
                                            id="project-add-btn"
                                        >
                                            Add
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>

                        <!--                project add form end-->

                        <div class="tab-pane fade" id="client-create">
                            <div class="modal-body modal-lg-6">
                                <form class="row g-4" id="client-form">
                                    <div class="alert alert-danger alert-dismissible" id="errorAlert" style="display: none;">
                                        <strong>Error : </strong> <span id="errorText"></span>
                                        <button type="button" class="btn-close btn-dark" aria-label="close" style="background: transparent; position: absolute; top: 0; right: 0;">
                                            &times;
                                        </button>
                                    </div>
                                    <div class="alert alert-success alert-dismissible" id="successAlert" style="display: none;">
                                        <strong>Success : </strong> <span id="successText"></span>
                                        <button type="button" class="btn-close btn-dark" aria-label="close" style="background: transparent; position: absolute; top: 0; right: 0;">
                                            &times;
                                        </button>
                                    </div>
                                    <div class="col-md-12">
                                        <label
                                            for="client-name"
                                            class="col-sm-12 col-form-label"
                                            >Client Name<span
                                                style="color: red"
                                            >
                                                *</span
                                            ></label
                                        >
                                        <input
                                            type="text"
                                            class="form-control border-task-description"
                                            id="client-name"
                                            name="name" />
                                    </div>

                                    <div class="col-md-12">
                                        <label
                                            for="client-email"
                                            class="col-sm-12 col-form-label"
                                            >Email<span style="color: red">
                                                *</span
                                            ></label
                                        >
                                        <input
                                            type="email"
                                            class="form-control border-task-description"
                                            id="client-email"
                                            name="email"
                                        />
                                    </div>

                                    <div class="col-md-12">
                                        <label
                                            for="client-phone"
                                            class="col-sm-12 col-form-label "
                                            >Phone<span style="color: red">
                                                *</span
                                            ></label
                                        >
                                        <input
                                            type="phone"
                                            class="form-control border-task-description"
                                            id="client-phone"
                                            name="phone"
                                            parttern="[0-9]{11}" placeholder="09123456789"
                                        />
                                    </div>

                                    <div class="text-center">
                                        <button
                                            type="submit"
                                            class="btn btn-primary mr-3"
                                            data-dismiss="modal"
                                        >
                                            Create
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--    modal for add project-->

        <!-- modal for project's details -->
        <div class="modal fade" id="project-details" data-bs-keyboard="true">
            <div class="modal-dialog modal-dialog-centered modal-xl">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="staticBackdropLabel">
                            Department Details
                        </h5>
                        <button
                            type="button"
                            class="btn-close"
                            data-bs-dismiss="modal"
                            aria-label="Close"
                        ></button>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-xl-4">
                                <div class="card">
                                    <div
                                        class="card-body profile-card pt-4 d-flex flex-column align-items-center"
                                    >
                                        <img
                                            src="/images/avatars/pm_avatar.svg"
                                            alt="Profile"
                                            class="rounded-circle"
                                            loading="lazy"
                                        />
                                        <h4 id="pm-name-modal"></h4>
                                        <div class="social-links mt-2">
                                            <h5>Project Manager</h5>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-xl-8">
                                <div class="card">
                                    <div class="card-body pt-3">
                                        <!-- Bordered Tabs -->
                                        <ul
                                            class="nav nav-tabs nav-tabs-bordered"
                                        >
                                            <li class="nav-item">
                                                <button
                                                    class="nav-link active"
                                                    data-bs-toggle="tab"
                                                    data-bs-target="#project-overview"
                                                >
                                                    Overview
                                                </button>
                                            </li>

                                            <li class="nav-item">
                                                <button
                                                    class="nav-link"
                                                    data-bs-toggle="tab"
                                                    data-bs-target="#project-edit"
                                                >
                                                    Edit
                                                </button>
                                            </li>
                                            <li class="nav-item">
                                                <button
                                                    class="nav-link"
                                                    data-bs-toggle="tab"
                                                    data-bs-target="#client-info"
                                                >
                                                    Client info
                                                </button>
                                            </li>

                                            <li class="nav-item">
                                                <button
                                                    class="nav-link"
                                                    data-bs-toggle="tab"
                                                    data-bs-target="#amount"
                                                >
                                                    Amount
                                                </button>
                                            </li>

                                            <li class="nav-item">
                                                <button
                                                        class="nav-link"
                                                        data-bs-toggle="tab"
                                                        data-bs-target="#deliverable-list"
                                                >
                                                    deliverable
                                                </button>
                                            </li>

                                            <li class="nav-item">
                                                <button
                                                        class="nav-link"
                                                        data-bs-toggle="tab"
                                                        data-bs-target="#edit-architecture"
                                                >
                                                    architecture
                                                </button>
                                            </li>

                                            <li class="nav-item">
                                                <button
                                                    class="nav-link"
                                                    data-bs-toggle="tab"
                                                    data-bs-target="#review"
                                                >
                                                    Review
                                                </button>
                                            </li>
                                        </ul>
                                        <div class="tab-content pt-2">
                                            <div
                                                class="tab-pane fade show active profile-overview"
                                                id="project-overview"
                                            >
                                                <h5 class="card-title">
                                                    About background
                                                </h5>
                                                <p
                                                    class="small fst-italic"
                                                    id="project-background"
                                                ></p>

                                                <h5 class="card-title">
                                                    Project Details
                                                </h5>

                                                <div class="row">
                                                    <div
                                                        class="col-lg-3 col-md-4 label col-4"
                                                    >
                                                        Department name
                                                    </div>
                                                    <div
                                                        class="col-lg-9 col-md-8 col-8"
                                                        id="project-department-name"
                                                    >
                                                        dance club
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div
                                                        class="col-lg-3 col-md-4 label col-4"
                                                    >
                                                        Project name
                                                    </div>
                                                    <div
                                                        class="col-lg-9 col-md-8 col-8"
                                                        id="project-name"
                                                    >
                                                        find nemo
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div
                                                        class="col-lg-3 col-md-4 label col-4"
                                                    >
                                                        Duration
                                                    </div>
                                                    <div
                                                        class="col-lg-9 col-md-8 col-8"
                                                        id="project-duration"
                                                    >
                                                        3 Months
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div
                                                        class="col-lg-3 col-md-4 label col-4"
                                                    >
                                                        Start date
                                                    </div>
                                                    <div
                                                        class="col-lg-9 col-md-8 col-8"
                                                        id="project-start-date"
                                                    >
                                                        25 september 2022
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div
                                                        class="col-lg-3 col-md-4 label col-4"
                                                    >
                                                        End date
                                                    </div>
                                                    <div
                                                        class="col-lg-9 col-md-8 col-8"
                                                        id="project-end-date"
                                                    >
                                                        25 december 2022
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div
                                                        class="col-lg-3 col-md-4 label col-4"
                                                    >
                                                        Current phase
                                                    </div>
                                                    <div
                                                        class="col-lg-9 col-md-8 col-8"
                                                        id="project-current-phase"
                                                    >
                                                        Basic design
                                                    </div>
                                                </div>
                                                <div
                                                    class="accordion"
                                                    id="accordionExample"
                                                >
                                                    <div class="accordion-item">
                                                        <h2
                                                            class="accordion-header"
                                                            id="headingOne"
                                                        >
                                                            <button
                                                                class="accordion-button collapsed"
                                                                type="button"
                                                                data-bs-toggle="collapse"
                                                                data-bs-target="#collapseOne"
                                                                aria-expanded="false"
                                                                aria-controls="collapseOne"
                                                            >
                                                                System Outline
                                                            </button>
                                                        </h2>
                                                        <div
                                                            id="collapseOne"
                                                            class="accordion-collapse collapse"
                                                            aria-labelledby="headingOne"
                                                            data-bs-parent="#accordionExample"
                                                        >
                                                            <ul
                                                                class="list-group accordion-body p-2 rounded-end"
                                                            >
                                                                <li
                                                                    class="list-group-item d-flex justify-content-between"
                                                                >
                                                                    Analysis<i
                                                                        class="bi bi-check2-all text-success fs-4"
                                                                    ></i>
                                                                </li>
                                                                <li
                                                                    class="list-group-item d-flex justify-content-between"
                                                                >
                                                                    System
                                                                    Design<i
                                                                        class="bi bi-check2-all text-success fs-4"
                                                                    ></i>
                                                                </li>
                                                                <li
                                                                    class="list-group-item d-flex justify-content-between"
                                                                >
                                                                    Source
                                                                    Code<i
                                                                        class="bi bi-check2-all text-success fs-4"
                                                                    ></i>
                                                                </li>
                                                                <li
                                                                    class="list-group-item d-flex justify-content-between"
                                                                >
                                                                    Testing<i
                                                                        class="bi bi-check2-all text-success fs-4"
                                                                    ></i>
                                                                </li>
                                                                <li
                                                                    class="list-group-item d-flex justify-content-between"
                                                                >
                                                                    Deploy
                                                                </li>
                                                                <li
                                                                    class="list-group-item d-flex justify-content-between"
                                                                >
                                                                    Maintence
                                                                </li>
                                                                <li
                                                                    class="list-group-item d-flex justify-content-between"
                                                                >
                                                                    Document
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                    <div class="accordion-item">
                                                        <h2
                                                            class="accordion-header"
                                                            id="headingTwo"
                                                        >
                                                            <button
                                                                class="accordion-button collapsed"
                                                                type="button"
                                                                data-bs-toggle="collapse"
                                                                data-bs-target="#collapseTwo"
                                                                aria-expanded="false"
                                                                aria-controls="collapseTwo"
                                                            >
                                                                Amount
                                                            </button>
                                                        </h2>
                                                        <div
                                                            id="collapseTwo"
                                                            class="accordion-collapse collapse"
                                                            aria-labelledby="headingTwo"
                                                            data-bs-parent="#accordionExample"
                                                        >
                                                            <ul
                                                                class="list-group accordion-body p-2 rounded-end"
                                                            >
                                                                <li
                                                                    class="list-group-item d-flex justify-content-between align-items-center"
                                                                >
                                                                    Basic
                                                                    Design<span
                                                                        class="badge bg-primary rounded-pill"
                                                                        id="basic-design-count"
                                                                        ></span
                                                                    >
                                                                </li>

                                                                <li
                                                                    class="list-group-item d-flex justify-content-between align-items-center"
                                                                >
                                                                    Detail
                                                                    Design<span
                                                                        class="badge bg-primary rounded-pill"
                                                                        id="detail-design-count"
                                                                        ></span
                                                                    >
                                                                </li>

                                                                <li
                                                                    class="list-group-item d-flex justify-content-between align-items-center"
                                                                >
                                                                    Coding<span
                                                                        class="badge bg-primary rounded-pill"
                                                                        id="coding-count"
                                                                        ></span
                                                                    >
                                                                </li>

                                                                <li
                                                                    class="list-group-item d-flex justify-content-between align-items-center"
                                                                >
                                                                    Unit
                                                                    Testing<span
                                                                        class="badge bg-primary rounded-pill"
                                                                        id="unit-testing-count"
                                                                        ></span
                                                                    >
                                                                </li>

                                                                <li
                                                                    class="list-group-item d-flex justify-content-between align-items-center"
                                                                >
                                                                    Integrated
                                                                    Testing<span
                                                                        class="badge bg-primary rounded-pill"
                                                                        id="integrated-testing-count"
                                                                        ></span
                                                                    >
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                    <div class="accordion-item">
                                                        <h2
                                                            class="accordion-header"
                                                            id="headingThree"
                                                        >
                                                            <button
                                                                class="accordion-button collapsed"
                                                                type="button"
                                                                data-bs-toggle="collapse"
                                                                data-bs-target="#collapseThree"
                                                                aria-expanded="false"
                                                                aria-controls="collapseThree"
                                                            >
                                                                Objective
                                                            </button>
                                                        </h2>
                                                        <div
                                                            id="collapseThree"
                                                            class="accordion-collapse collapse"
                                                            aria-labelledby="headingThree"
                                                            data-bs-parent="#accordionExample"
                                                        >
                                                            <div
                                                                class="accordion-body position-relative"
                                                                id="show-project-objective"
                                                            ></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div
                                                class="tab-pane fade profile-edit pt-3"
                                                id="project-edit"
                                            >
                                                <!-- Profile Edit Form -->
                                                <form id="project-detail-edit-form">
                                                    <input type="number" hidden id="current-edditing-projetc-id">
                                                    <div class="row mb-3">
                                                        <label
                                                            for="edit-project-phase"
                                                            class="col-md-4 col-lg-3 col-form-label"
                                                            >Current
                                                            Phase</label
                                                        >
                                                        <div
                                                            class="col-md-8 col-lg-9"
                                                        >
                                                            
                                                                <select
                                                                    type="text"
                                                                    class="form-control border-task-description"
                                                                    name=""
                                                                    id="edit-project-phase"
                                                                >
                                                                <option
                                                                    value="PLANNING"
                                                                >
                                                                    Planning
                                                                </option>
                                                                <option
                                                                value="DESIGN"
                                                                >
                                                                    Design
                                                                </option>
                                                                <option
                                                                    value="CODING"
                                                                >
                                                                    Coding
                                                                </option>
                                                                <option
                                                                value="TESTING"
                                                                >
                                                                    Testing
                                                                </option>
                                                                <option
                                                                    value="REVIEW"
                                                                >
                                                                    Review
                                                                </option>
                                                                <option
                                                                    value="DEPLOYMENT"
                                                                >
                                                                    Deployment
                                                                </option>
                                                                <option
                                                                    value="MAINTENANCE"
                                                                >
                                                                    Maintenance
                                                                </option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="row mb-3">
                                                        <label
                                                            for="background"
                                                            class="col-md-4 col-lg-3 col-form-label"
                                                            >Background</label
                                                        >
                                                        <div
                                                            class="col-md-8 col-lg-9"
                                                        >
                                                            <textarea
                                                                type="text"
                                                                class="form-control border-task-description"
                                                                name="background"
                                                                id="project-detail-background"

                                                            ></textarea>
                                                        </div>
                                                    </div>

                                                    <div class="row mb-3">
                                                        <label
                                                            for="project-detail-name"
                                                            class="col-md-4 col-lg-3 col-form-label"
                                                            >Project name</label
                                                        >
                                                        <div
                                                            class="col-md-8 col-lg-9"
                                                        >
                                                            <input
                                                                name="project_name"
                                                                type="text"
                                                                class="form-control"
                                                                id="project-detail-name"
                                                                required
                                                            />
                                                        </div>
                                                    </div>

                                                    <div class="row mb-3">
                                                        <label
                                                            for="start-date"
                                                            class="col-md-4 col-lg-3 col-form-label"
                                                            >start date</label
                                                        >
                                                        <div
                                                            class="col-md-8 col-lg-9"
                                                        >
                                                            <input
                                                                name="start_date"
                                                                type="date"
                                                                class="form-control"
                                                                id="start-date"
                                                                required disabled
                                                            />
                                                        </div>
                                                    </div>

                                                    <div class="row mb-3">
                                                        <label
                                                            for="project-edit-duration"
                                                            class="col-md-4 col-lg-3 col-form-label"
                                                            >Duration</label
                                                        >
                                                        <div
                                                            class="col-md-8 col-lg-9"
                                                        >
                                                            <input
                                                                name="end_date"
                                                                type="number"
                                                                min="1"
                                                                value="1"
                                                                required
                                                                class="form-control"
                                                                id="project-edit-duration"
                                                                oninput="validity.valid||(value='');"
                                                            />
                                                        </div>
                                                    </div>

                                                    <div class="row mb-3">
                                                        <label
                                                            for="end-date-in-edit"
                                                            class="col-md-4 col-lg-3 col-form-label"
                                                            >end date</label
                                                        >
                                                        <div
                                                            class="col-md-8 col-lg-9"
                                                        >
                                                            <input
                                                                name="start_date"
                                                                type="text"
                                                                class="form-control"
                                                                id="end-date-in-edit"
                                                                disabled
                                                            />
                                                        </div>
                                                    </div>

                                                    <div class="row mb-3">
                                                        <label
                                                            for="objective"
                                                            class="col-md-4 col-lg-3 col-form-label"
                                                            >Objective</label
                                                        >
                                                        <div
                                                            class="col-md-8 col-lg-9"
                                                        >
                                                            <div
                                                                id="edit-project-objective"
                                                            ></div>
                                                        </div>
                                                    </div>

                                                    <div
                                                        class="mt-lg-5"
                                                    >
                                                        <button
                                                            type="submit"
                                                            class="btn-sm btn-primary"
                                                        >
                                                            Save Changes
                                                        </button>
                                                    </div>
                                                </form>
                                                <!-- End Profile Edit Form -->
                                            </div>
                                            <div
                                                class="tab-pane fade profile-edit pt-3"
                                                id="client-info"
                                            >
                                                <div class="row">
                                                    <div
                                                        class="fs-2 text-center"
                                                        id="my-dear-customer-name"
                                                    >
                                                        DAT
                                                    </div>
                                                    <div
                                                        class="row row-cols-1 gap-2"
                                                    >
                                                        <div
                                                            class="d-flex justify-content-start align-items-center gap-2"
                                                        >
                                                            <div
                                                                class="p-2 d-inline-block justify-content-center align-items-center rounded-circle bg-primary fs-5 text-white"
                                                            >
                                                                <i
                                                                    class="bi bi-envelope-at"
                                                                ></i>
                                                            </div>
                                                            <div
                                                                class="align-self-center"
                                                                id="client-email-address"
                                                            >
                                                                suckmyfingure@gmail.com
                                                            </div>
                                                        </div>
                                                        <div
                                                            class="d-flex justify-content-start align-items-center gap-2"
                                                        >
                                                            <div
                                                                class="p-2 d-inline-block justify-content-center align-items-center rounded-circle bg-primary fs-5 text-white"
                                                            >
                                                                <i
                                                                    class="bi bi-telephone"
                                                                ></i>
                                                            </div>
                                                            <div
                                                                class="align-self-center"
                                                                id="client-phone-contect"
                                                            >
                                                                09 77558822
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div
                                                class="tab-pane fade pt-3"
                                                id="amount"
                                            >
                                                <ul
                                                    class="list-group accordion-body p-2 rounded-end"
                                                >
                                                    <li
                                                        class="list-group-item d-flex justify-content-between"
                                                    >
                                                        Basic design
                                                        <div class="number">
                                                            <span class="minus"
                                                                >-</span
                                                            >
                                                            <input
                                                                type="text"
                                                                value="0"
                                                                id="edit-basic-design-count"
                                                            />
                                                            <span class="plus"
                                                                >+</span
                                                            >
                                                        </div>
                                                    </li>
                                                    <li
                                                        class="list-group-item d-flex justify-content-between"
                                                    >
                                                        Detail design
                                                        <div class="number">
                                                            <span class="minus"
                                                                >-</span
                                                            >
                                                            <input
                                                                type="text"
                                                                value="0"
                                                                id="edit-detail-design-count"
                                                            />
                                                            <span class="plus"
                                                                >+</span
                                                            >
                                                        </div>
                                                    </li>
                                                    <li
                                                        class="list-group-item d-flex justify-content-between"
                                                    >
                                                        Coding
                                                        <div class="number">
                                                            <span class="minus"
                                                                >-</span
                                                            >
                                                            <input
                                                                type="text"
                                                                value="0"
                                                                id="edit-coding-count"
                                                            />
                                                            <span class="plus"
                                                                >+</span
                                                            >
                                                        </div>
                                                    </li>
                                                    <li
                                                        class="list-group-item d-flex justify-content-between"
                                                    >
                                                        Unit testing
                                                        <div class="number">
                                                            <span class="minus"
                                                                >-</span
                                                            >
                                                            <input
                                                                type="text"
                                                                value="0"
                                                                id="edit-unit-testing-count"
                                                            />
                                                            <span class="plus"
                                                                >+</span
                                                            >
                                                        </div>
                                                    </li>
                                                    <li
                                                        class="list-group-item d-flex justify-content-between"
                                                    >
                                                        Integrated testing
                                                        <div class="number">
                                                            <span class="minus"
                                                                >-</span
                                                            >
                                                            <input
                                                                type="text"
                                                                value="0"
                                                                id="edit-integrated-testing-count"
                                                            />
                                                            <span class="plus"
                                                                >+</span
                                                            >
                                                        </div>
                                                    </li>
                                                </ul>
                                                <div class="text-center">
                                                    <div  id="updateButtonC">
                                                    </div>
                                                </div>
                                            </div>

                                            <div
                                                class="tab-pane fade pt-3"
                                                id="review"
                                            >
                                                <div class="row mb-3">
                                                    <label
                                                        for="project-external-review-count"
                                                        class="col-md-4 col-lg-3 col-form-label"
                                                        >External Review</label
                                                    >
                                                    <div
                                                        class="col-md-8 col-lg-9"
                                                    >
                                                        <input
                                                            name="project_name"
                                                            type="number"
                                                            class="form-control"
                                                            min="0"
                                                            id="project-external-review-count"
                                                            oninput="validity.valid||(value='');"
                                                        />
                                                    </div>
                                                </div>

                                                <div class="row mb-3">
                                                    <label
                                                        for="project-internal-review-count"
                                                        class="col-md-4 col-lg-3 col-form-label"
                                                        >Internal Review</label
                                                    >
                                                    <div
                                                        class="col-md-8 col-lg-9"
                                                    >
                                                        <input
                                                            name="project_name"
                                                            type="number"
                                                            min="0"
                                                            class="form-control"
                                                            oninput="validity.valid||(value='');"
                                                            id="project-internal-review-count"
                                                        />
                                                    </div>
                                                </div>
                                                <div>
                                                <div  id="updateButtonContainer">
                                                </div>
                                                </div>
                                            </div>

                                            <div
                                                    class="tab-pane fade pt-3"
                                                    id="edit-architecture"
                                            >

                                                <div id="architectures-list-in-edit" class="d-flex gap-2 flex-wrap">

                                                </div>
                                            </div>
                                            <div class="tab-pane fade pt-3" id="deliverable-list">
                                                <table>
                                                    <thead>
                                                    <tr>
                                                        <th>Deliverable Type</th>

                                                    </tr>
                                                    </thead>
                                                    <tbody id="deliverable-type">
                                                    <!-- Rows for deliverable-type and checkboxes will be dynamically added here -->
                                                    </tbody>
                                                </table>
                                                <div id="updateButton1"></div>
                                            </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <a href="/project" class="btn btn-primary" id="navigate-task"
                            >manage task</a
                        >
                    </div>
                </div>
            </div>
        </div>
        <!-- modal for project's details -->

        <!-- Scripts -->

        <!-- fontawesome -->

        <!-- sort (department, project), form validation and search bar behavior are all here -->

        <!-- <script src="/js/bootstrap-select2.min.js"></script> -->
        <!-- <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script> -->
        <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.14.0/js/bootstrap-select.min.js"></script> -->
            </div>
    </body>
    <script src="https://js.pusher.com/8.2.0/pusher.min.js"></script>
    <script src="/js/notification.js" type="module"></script>
</html>
