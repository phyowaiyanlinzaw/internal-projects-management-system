<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head th:replace="fragments/header :: header">
    <meta charset="UTF-8" />
    <title>Layout</title>
</head>

<body>
    <!-- Spinner Start -->
    <!-- <div id="spinner"
     class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
    <div class="spinner-border text-primary" style="width: 3rem; height: 3rem" role="status">
        <span class="sr-only">Loading...</span>
    </div>
</div> -->

    <!-- Left Sidebar - style you can find in sidebar.scss  -->
    <div th:replace="fragments/sidebar :: sidebar"></div>

    <div layout:fragment="content"></div>

    <!-- modal for department's details -->
    <div class="modal fade" id="department-details" data-bs-keyboard="true">
            <div
                class="modal-dialog modal-dialog-centered modal-xl modal-fullscreen-sm-down modal-fullscreen-lg-down"
            >
                <div class="modal-content">
                    <div
                        class="modal-header"
                        style="background-color: #369; color: white"
                    >
                        <h5 class="modal-title" id="staticBackdropLabel">
                            Department Details
                        </h5>
                        <button
                            type="button"
                            class="btn-close text-white btn-close-white"
                            data-bs-dismiss="modal"
                            aria-label="Close"
                        ></button>
                    </div>
                    <div class="modal-body">
                        <!-- TODO :: SHOW DEPARTMENT'S DETAILS -->
                        <div class="container-fluid">
                            <div class="row">
                                <div class="card">
                                    <div
                                        class="card-body profile-card pt-4 d-flex flex-column align-items-center"
                                    >
                                        <img
                                            src="https://source.unsplash.com/random/200x200?sig=1"
                                            alt="Profile"
                                            class="rounded-circle"
                                            style="height: 100px; width: 100px"
                                        />
                                        <h4 style="margin-top: 10px">
                                            Department Head
                                        </h4>
                                        <h5>Lai Kuan Lin</h5>
                                        <div class="social-links mt-2">
                                            <a href="#" class="twitter"
                                                ><i class="bi bi-twitter"></i
                                            ></a>
                                            <a href="#" class="facebook"
                                                ><i class="bi bi-facebook"></i
                                            ></a>
                                            <a href="#" class="instagram"
                                                ><i class="bi bi-instagram"></i
                                            ></a>
                                            <a href="#" class="linkedin"
                                                ><i class="bi bi-linkedin"></i
                                            ></a>
                                        </div>
                                    </div>
                                </div>
                                <div class="pt-3">
                                    <!-- Bordered Tabs -->
                                    <ul class="nav nav-tabs nav-tabs-bordered">
                                        <li class="nav-item">
                                            <button
                                                class="nav-link active"
                                                data-bs-toggle="tab"
                                                data-bs-target="#profile-overview"
                                            >
                                                Overview
                                            </button>
                                        </li>

                                        <li class="nav-item">
                                            <button
                                                class="nav-link"
                                                data-bs-toggle="tab"
                                                data-bs-target="#profile-edit"
                                            >
                                                Edit
                                            </button>
                                        </li>
                                    </ul>
                                    <div class="tab-content pt-3">
                                        <div
                                            class="tab-pane fade show active profile-overview"
                                            id="profile-overview"
                                        >
                                            <div
                                                class="row row-cols-lg-1 row-cols-sm-1 row-cols-md-1 row-cols-xl-2"
                                            >
                                                <ul class="list-group col" style="padding: 0;">
                                                    <li
                                                        class="list-group-item d-flex justify-content-between align-items-center"
                                                    >
                                                        Total Project
                                                        <span
                                                            class="badge bg-primary rounded-pill"
                                                            >14</span
                                                        >
                                                    </li>
                                                    <br />
                                                    <li
                                                        class="list-group-item d-flex justify-content-between align-items-center"
                                                    >
                                                        Total Member
                                                        <span
                                                            class="badge bg-primary rounded-pill"
                                                            >100</span
                                                        >
                                                    </li>
                                                </ul>
                                                <div class="col">
                                                    <canvas 
                                                    style="max-width: 960px; padding: 0; min-width: 300px"
                                                    id="department-projects-chart" height="200"
                                                ></canvas>
                                                </div>
                                                
                                            </div>
                                        </div>

                                        <div
                                            class="tab-pane fade profile-edit pt-3"
                                            id="profile-edit"
                                        >
                                            <form>
                                                <div>
                                                    <label
                                                        >Department Name</label
                                                    >
                                                    <br /><br />
                                                    <input
                                                        type="text"
                                                        class="form-control"
                                                        name="departmentname"
                                                        placeholder="Department Name"
                                                    />
                                                </div>
                                                <br />
                                                <div>
                                                    <label for="departmenthead"
                                                        >Choose Deparment
                                                        Head:</label
                                                    ><br /><br />
                                                    <select
                                                        name="departmenthead"
                                                        class="form-control"
                                                    >
                                                        <option value="volvo">
                                                            Phyoe Wai Yan
                                                        </option>
                                                        <option value="saab">
                                                            Zaw Lin Shein
                                                        </option>
                                                        <option value="opel">
                                                            Thant Htet Ko
                                                        </option>
                                                    </select>
                                                </div>
                                                <br />

                                                <button
                                                    style="
                                                        background-color: #369;
                                                    "
                                                    type="submit"
                                                    class="btn btn-primary py-2 w-100 mb-3"
                                                    id="loign-btn"
                                                >
                                                    Edit
                                                </button>
                                            </form>
                                        </div>
                                    </div>
                                    <!-- End Bordered Tabs -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    <!-- modal for department's details -->

    <!-- task's details start -->
    <div class="modal fade" id="task-details" data-bs-keyboard="true">
        <div class="modal-dialog modal-dialog-centered modal-lg ">
            <div class="modal-content task-content ">
                <div class="modal-header">
                    <h2 class="card-title" style="text-align:center">Task Details</h2>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">

                    <form class="row g-5" id="validation-form" action="">

                        <div class="col-lg-12 ">
                            <span><i class="fa fa-tasks"></i></span>
                            <label id="task" class="editable-label" name="task" onclick="editTitle()">  Testing Write</label>
                            <input id="task" name="task" type="text" class="form-control border-task editable-input" dir="auto" data-autosize="true" style="overflow: hidden; overflow-wrap: break-word; height: 36.8px; display: none;" onblur="updateTitle(this)">
                        </div>

                        <div  class="col-lg-12">
                        <span class="text-align-center">
                            <i class="fa-solid fa-users"></i>
                        </span>
                            <select id="member" name="member" class="form-control selectpicker editable-input" data-live-search="true" multiple dir="auto" data-width="50%" data-autosize="true" style="overflow: hidden; overflow-wrap: break-word; height: 36.8px; display: none;" onblur="updateTitle(this)">
                                <option value="John Doe"selected>John Doe</option>
                                <option value="Smith">Smith</option>
                                <option value="Peter">Peter</option>
                                <option value="James">James</option>
                            </select>

                        </div>

                        <div class="col-lg-6">
                            <span><i class="fa-solid fa-calendar-days"></i></span>
                            <label id="start_time" class="editable-label" name="start_time" onclick="editTitle()">  Start Date</label>
                            <input type="date" id="start_time" name="start_time"  class="form-control border-task editable-input" dir="auto" data-autosize="true" style="overflow: hidden; overflow-wrap: break-word; height: 36.8px; display: none;" onblur="updateTitle(this)">
                        </div>

                        <div class="col-lg-6 ">
                            <i class="fa-regular fa-calendar"></i>
                            <label id="duration" class="editable-label" name="duration" onclick="editTitle()">  Duration</label>
                            <input type="text" id="tduration" name="task"  class="form-control border-task editable-input" dir="auto" data-autosize="true" style="overflow: hidden; overflow-wrap: break-word; height: 36.8px; display: none;" onblur="updateTitle(this)">
                        </div>

                        <div class="col-lg-6">
                        <span>
                            <i class="fa-solid fa-circle-chevron-down"></i> Status
                        </span>
                            <select id="projectStatuses" name="projectStatuses" class="selectpicker">
                                <option data-content="<span class='badge rounded-pill  bg-primary'>STARTED</span>" value="STARTED" selected>STARTED</option>
                                <option data-content="<span class='badge rounded-pill  bg-warning'>IN_PROGRESS</span>" value="IN_PROGRESS">IN_PROGRESS</option>
                                <option data-content="<span class='badge rounded-pill  bg-success'>FINISHED</span>" value="FINISHED">FINISHED</option>
                            </select>
                        </div>

                        <div class="col-lg-12">
                            <span><i class="fa-solid fa-bars-staggered"></i></span>
                            <label id="description-label" class="editable-label" name="description" onclick="toggleEditor()">  Description</label>
                            <textarea id="description-editor" class="form-control editable-input" name="description" rows="5" style="display: none;"></textarea>
                        </div>

                    </form>

                </div>
            </div>
        </div>
    </div>
    <!-- task's details end -->


    <!-- add task -->
    <div class="modal fade" id="add-task" data-bs-keyboard="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content task-content">
                <div class="modal-header">
                    <h2 class="card-title" style="text-align:center">Add Task</h2>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">

                    <form class="row g-3" id="validation-form" action="">
                        <div class="col-lg-6">
                            <label for="task" class="col-sm-12 col-form-label " name="task" id="task">Task Name <span style="color:red"> *</span></label>
                            <input type="text" class="form-control border-task" id="task" name="task">
                        </div>

                        <div class="col-lg-6">
                            <label for="pm" class="col-sm-12 col-form-label " name="pm" id="pm">Project Manager <span style="color:red"> *</span></label>
                            <select class="form-control selectpicker"  aria-label="Select Project Manager" data-live-search="true" id="pm" name="pm" multiple>
                                <option>Category</option>
                                <option>Android</option>
                                <option>IOS</option>
                                <option>Ui/Ux Design</option>
                                <option>Development</option>
                            </select>
                        </div>


                        <div class="col-md-6">
                            <label for="start_time" class="col-sm-12 col-form-label" name="start_time" id="start_time">Start Date <span style="color:red"> *</span></label>
                            <input type="date" class="form-control border-task" id="start_time" name="start_time">
                        </div>

                        <div class="col-md-6">
                            <label for="end_time" class="col-sm-12 col-form-label" name="end_time" id="end_time">End Date <span style="color:red"> *</span></label>
                            <input type="date" class="form-control border-task" id="end_time" name="end_time">
                        </div>


                        <div class="col-12">
                            <label for="description" class="col-sm-12 col-form-label" name="description" id="description">Description</label>
                            <textarea class="form-control border-task-description" id="description" name="description" rows="2"></textarea>
                        </div>



                        <div class="text-center">
                            <button type="submit" class="btn btn-primary col-2" data-dismiss="modal">Add</button>
                            <button type="reset" class="btn btn-secondary mr-3" data-dismiss="modal">Cancel</button>
                        </div>
                    </form>

                </div>
            </div>
        </div>
    </div>
    <!-- add task -->

    <!-- confrim box for delete -->
    <div class="modal fade" id="confirm-box" data-bs-keyboard="false" data-bs-backdrop="static">
        <div class="modal-dialog modal-dialog-centered modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <span>Are you sure you want to delete ?</span>
                    <button class="btn btn-danger col me-1">YES</button>
                    <button class="btn btn-primary col" data-bs-dismiss="modal" aria-label="Close">
                        NO
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- confirm box for delete -->

<!--    modal for add project-->
    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false"
         tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content task-content">
                <div class="modal-header">
                    <h2 class="card-title" style="text-align:center">Add Project</h2>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">

                    <form class="row g-3" id="validation-form" action="">
                        <div class="col-lg-6">
                            <label for="name" class="col-sm-12 col-form-label" name="name" id="name">Project Name<span style="color:red"> *</span></label>
                            <input type="text" class="form-control border-task" id="name" name="name">
                        </div>


                        <div class="col-lg-6">
                            <label for="department" class="col-sm-12 col-form-label" name="department" id="name">Department Name <span style="color:red"> *</span></label>
                            <select class="form-control selectpicker"  aria-label="Select Department" data-live-search="true" id="department" name="department" multiple>
                                <option>Category</option>
                                <option>Android</option>
                                <option>IOS</option>
                                <option>Ui/Ux Design</option>
                                <option>Development</option>
                            </select>
                        </div>

                        <div class="col-lg-6">
                            <label for="user" class="col-sm-12 col-form-label" name="user" id="user">Project Manager <span style="color:red"> *</span></label>
                            <input type="text" class="form-control border-task" id="user" name="user">
                        </div>

                        <div class="col-lg-6">
                            <label for="user" class="col-sm-12 col-form-label" name="user" id="user">Assign Members <span style="color:red"> *</span></label>
                            <select class="form-control selectpicker"  aria-label="Select Members" data-live-search="true" id="member" name="member" multiple>
                                <option>Category</option>
                                <option>Android</option>
                                <option>IOS</option>
                                <option>Ui/Ux Design</option>
                                <option>Development</option>
                            </select>
                        </div>


                        <div class="col-lg-6">
                            <label for="client" class="col-sm-12 col-form-label" name="client" id="client">Client <span style="color:red"> *</span></label>
                            <select class="form-control selectpicker"  aria-label="Select Clients" data-live-search="true" id="client" name="client" >
                                <option>Category</option>
                                <option>Android</option>
                                <option>IOS</option>
                                <option>Ui/Ux Design</option>
                                <option>Development</option>
                            </select>
                        </div>

                        <div class="col-lg-6">
                            <label for="background" class="col-sm-12 col-form-label" name="background" id="background">Background<span style="color:red"> *</span></label>
                            <input type="text" class="form-control border-task" id="background" name="background">
                        </div>

                        <div class="col-md-6">
                            <label for="start_date" class="col-sm-12 col-form-label" name="start_date" id="start_date">Start Date <span style="color:red"> *</span></label>
                            <input type="date" class="form-control border-task" id="start_date" name="start_date">
                        </div>

                        <div class="col-6">
                            <label for="duration" class="col-sm-12 col-form-label" name="duration" id="duration">Duration <span style="color:red"> *</span></label>
                            <input type="text" class="form-control border-task" id="duration" name="duration">
                        </div>



                        <div class="col-lg-6">
                            <label for="duration" class="col-sm-12 col-form-label" name="objective" id="objective">Objective <span style="color:red"> *</span></label>
                            <input type="text" class="form-control border-task" id="objective" name="objective">
                        </div>



                        <div class="col-lg-6">
                            <label for="architectures" class="col-sm-12 col-form-label" name="architectures" id="architectures">Architecture <span style="color:red"> *</span></label>
                            <input type="text" class="form-control border-task" id="architectures" name="architectures">
                        </div>

                        <div class="col-lg-6">
                            <label for="systemOutlines" class="col-sm-12 col-form-label" name="systemOutlines" id="systemOutlines">SystemOutline <span style="color:red"> *</span></label>
                            <select class="form-control selectpicker"  aria-label="Select System Outlines" data-live-search="true" id="systemOutlines" name="systemOutlines" multiple>
                                <option>Analysis</option>
                                <option>System Design</option>
                                <option>Coding</option>
                                <option>Testing</option>
                                <option>Deploy</option>
                                <option>Maintenance</option>
                                <option>Document</option>
                            </select>
                        </div>

                        <div class="col-lg-6">
                            <label for="deliverable" class="col-sm-12 col-form-label" name="deliverable" id="deliverable">Deliverable  <span style="color:red"> *</span></label>
                            <input type="text" class="form-control border-task" id="deliverable" name="deliverable">
                        </div>


                        <div class="text-center">
                            <button type="submit" class="btn btn-primary col-2" data-dismiss="modal">Add</button>
                            <button type="reset" class="btn btn-secondary mr-2" data-dismiss="modal">Cancel</button>
                        </div>
                    </form>

                </div>
            </div>
        </div>
    </div>
<!--    modal for add project-->

    <!-- modal for project's details -->
    <div class="modal fade" id="project-details" data-bs-keyboard="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body"></div>
                <div class="modal-footer">
                    <a href="/project" class="btn btn-primary">manage task</a>
                </div>
            </div>
        </div>
    </div>
    <!-- modal for project's details -->

    <!-- add department modal -->
    <div class="modal fade" id="add-department-modal" data-bs-keyboard="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    <!-- TODO :: REDESIGN FORM FOR ADDING DEPARTMENT -->
                    <form>
                        <h1 class="modal-title fs-5" style="
                                    margin-bottom: 10px;
                                    text-align: center;
                                    color: #369;
                                    font-weight: bold;
                                ">
                            Add Department
                        </h1>
                        <div>
                            <label>Department Name</label> <br /><br />
                            <input type="text" class="form-control" name="departmentname"
                                placeholder="Department Name" />
                        </div>
                        <br />
                        <div>
                            <label for="departmenthead">Choose Deparment
                                Head:</label><br /><br />
                            <select name="departmenthead" id="departmenthead" class="form-control">
                                <option value="volvo">Phyoe Wai Yan</option>
                                <option value="saab">Zaw Lin Shein</option>
                                <option value="opel">Thant Htet Ko</option>
                            </select>
                        </div>
                        <br />

                        <button style="background-color: #369" type="submit" class="btn btn-primary py-2 w-100 mb-3">
                            Add
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- add department modal -->

    <div th:replace="fragments/footer :: footer"></div>


<!--    for select drop-drown-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>

    <!-- fontawesome -->
    <script src="/js/fontawesome.js"></script>

    <!-- jquery -->
    <script src="/js/jquery.3.7.1.min.js"></script>

    <!-- datable table -->
    <script src="/js/databales.min.js"></script>

    <!-- bootstrap -->
    <script src="/js/bootstrap.bundle.min.js"></script>

    <!-- javascript libraries -->
    <script src="/lib/chart/chart.min.js"></script>
    <script src="/lib/easing/easing.min.js"></script>
    <script src="/lib/waypoints/waypoints.min.js"></script>
    <script src="/lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="/lib/tempusdominus/js/moment.min.js"></script>
    <script src="/lib/tempusdominus/js/moment-timezone.min.js"></script>
    <script src="/lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js"></script>

    <!-- Template Javascript -->
    <script src="/js/main.js"></script>
    <script src="/js/forprogresscircleiguess.js"></script>

    <!-- sort (department, project), form validation and search bar behavior are all here -->
    <script src="/js/custome.js"></script>


<!--    task details js-->
    <script>
        // Get all elements with the common class name
        const editableLabels = document.querySelectorAll('.editable-label');
        const editableInputs = document.querySelectorAll('.editable-input');

        // Add event listeners for each element
        editableLabels.forEach(label => {
            label.addEventListener('click', editTitle);
        });

        editableInputs.forEach(input => {
            input.addEventListener('blur', function () {
                updateTitle(this);
            });
        });

        function editTitle() {
            const label = this;
            const input = label.nextElementSibling;

            label.style.display = 'none';
            input.style.display = 'block';
            input.value = label.textContent;
            input.focus();
        }

        function updateTitle(inputField) {
            const input = inputField;
            const label = input.previousElementSibling;

            label.textContent = input.value;
            label.style.display = 'inline';
            input.style.display = 'none';
        }


        function toggleEditor() {
            var editor = document.getElementById('description-editor');
            if (editor.style.display === 'none' || editor.style.display === '') {
                editor.style.display = 'block';
            } else {
                editor.style.display = 'none';
            }
        }
    </script>
</body>

</html>